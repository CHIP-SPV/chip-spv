\hypertarget{_s_d_k_bit_map_8hpp_source}{}\doxysection{SDKBit\+Map.\+hpp}
\label{_s_d_k_bit_map_8hpp_source}\index{/Users/pvelesko/local/CHIP-\/SPV/samples/hip-\/cuda/include/SDKBitMap.hpp@{/Users/pvelesko/local/CHIP-\/SPV/samples/hip-\/cuda/include/SDKBitMap.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/**********************************************************************}}
\DoxyCodeLine{2 \textcolor{comment}{Copyright ©2015 Advanced Micro Devices, Inc. All rights reserved.}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:}}
\DoxyCodeLine{5 \textcolor{comment}{}}
\DoxyCodeLine{6 \textcolor{comment}{•   Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.}}
\DoxyCodeLine{7 \textcolor{comment}{•   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or}}
\DoxyCodeLine{8 \textcolor{comment}{ other materials provided with the distribution.}}
\DoxyCodeLine{9 \textcolor{comment}{}}
\DoxyCodeLine{10 \textcolor{comment}{THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "{}AS IS"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED}}
\DoxyCodeLine{11 \textcolor{comment}{ WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY}}
\DoxyCodeLine{12 \textcolor{comment}{ DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS}}
\DoxyCodeLine{13 \textcolor{comment}{ OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING}}
\DoxyCodeLine{14 \textcolor{comment}{ NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.}}
\DoxyCodeLine{15 \textcolor{comment}{********************************************************************/}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#ifndef SDKBITMAP\_H\_}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define SDKBITMAP\_H\_}}
\DoxyCodeLine{18 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <cstdlib>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{short} bitMapID = 19778;}
\DoxyCodeLine{28 }
\DoxyCodeLine{32 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceappsdk}{appsdk}}}
\DoxyCodeLine{33 \{}
\DoxyCodeLine{34 }
\DoxyCodeLine{38 \textcolor{preprocessor}{\#pragma pack(push,1)}}
\DoxyCodeLine{39 }
\DoxyCodeLine{43 \textcolor{keyword}{typedef} uchar4 \mbox{\hyperlink{namespaceappsdk_afe255fb492387803fce3a8c7f1e24e93}{ColorPalette}};}
\DoxyCodeLine{44 }
\DoxyCodeLine{48 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{49 \{}
\DoxyCodeLine{50     \textcolor{keywordtype}{short} id;}
\DoxyCodeLine{51     \textcolor{keywordtype}{int} size;}
\DoxyCodeLine{52     \textcolor{keywordtype}{short} reserved1;}
\DoxyCodeLine{53     \textcolor{keywordtype}{short} reserved2;}
\DoxyCodeLine{54     \textcolor{keywordtype}{int} offset;}
\DoxyCodeLine{55 \} \mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}};}
\DoxyCodeLine{56 }
\DoxyCodeLine{57 }
\DoxyCodeLine{61 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{62 \{}
\DoxyCodeLine{63     \textcolor{keywordtype}{int} sizeInfo;}
\DoxyCodeLine{64     \textcolor{keywordtype}{int} width;}
\DoxyCodeLine{65     \textcolor{keywordtype}{int} height;}
\DoxyCodeLine{66     \textcolor{keywordtype}{short} planes;}
\DoxyCodeLine{67     \textcolor{keywordtype}{short} bitsPerPixel;}
\DoxyCodeLine{68     \textcolor{keywordtype}{unsigned} compression;}
\DoxyCodeLine{69     \textcolor{keywordtype}{unsigned} imageSize;}
\DoxyCodeLine{70     \textcolor{keywordtype}{int} xPelsPerMeter;}
\DoxyCodeLine{71     \textcolor{keywordtype}{int} yPelsPerMeter;}
\DoxyCodeLine{72     \textcolor{keywordtype}{int} clrUsed;}
\DoxyCodeLine{73     \textcolor{keywordtype}{int} clrImportant;}
\DoxyCodeLine{74 \} \mbox{\hyperlink{structappsdk_1_1_bit_map_info_header}{BitMapInfoHeader}};}
\DoxyCodeLine{75 }
\DoxyCodeLine{79 \textcolor{keyword}{class }\mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map}{SDKBitMap}} : \textcolor{keyword}{public} \mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}}, \textcolor{keyword}{public} \mbox{\hyperlink{structappsdk_1_1_bit_map_info_header}{BitMapInfoHeader}}}
\DoxyCodeLine{80 \{}
\DoxyCodeLine{81     \textcolor{keyword}{private}:}
\DoxyCodeLine{82         uchar4 * pixels\_;               }
\DoxyCodeLine{83         \textcolor{keywordtype}{int} numColors\_;                 }
\DoxyCodeLine{84         \mbox{\hyperlink{namespaceappsdk_afe255fb492387803fce3a8c7f1e24e93}{ColorPalette}} * colors\_;         }
\DoxyCodeLine{85         \textcolor{keywordtype}{bool} isLoaded\_;                 }
\DoxyCodeLine{86         \textcolor{keywordtype}{void} releaseResources(\textcolor{keywordtype}{void})     }
\DoxyCodeLine{87         \{}
\DoxyCodeLine{88             \textcolor{keywordflow}{if} (pixels\_ != NULL)}
\DoxyCodeLine{89             \{}
\DoxyCodeLine{90                 \textcolor{keyword}{delete}[] pixels\_;}
\DoxyCodeLine{91             \}}
\DoxyCodeLine{92             \textcolor{keywordflow}{if} (colors\_ != NULL)}
\DoxyCodeLine{93             \{}
\DoxyCodeLine{94                 \textcolor{keyword}{delete}[] colors\_;}
\DoxyCodeLine{95             \}}
\DoxyCodeLine{96             pixels\_    = NULL;}
\DoxyCodeLine{97             colors\_    = NULL;}
\DoxyCodeLine{98             isLoaded\_  = \textcolor{keyword}{false};}
\DoxyCodeLine{99         \}}
\DoxyCodeLine{100         \textcolor{keywordtype}{int} colorIndex(uchar4 color)    }
\DoxyCodeLine{101         \{}
\DoxyCodeLine{102             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numColors\_; i++)}
\DoxyCodeLine{103             \{}
\DoxyCodeLine{104                 \textcolor{keywordflow}{if} (colors\_[i].x == color.x \&\&}
\DoxyCodeLine{105                         colors\_[i].y == color.y \&\&}
\DoxyCodeLine{106                         colors\_[i].z == color.z \&\&}
\DoxyCodeLine{107                         colors\_[i].w == color.w)}
\DoxyCodeLine{108                 \{}
\DoxyCodeLine{109                     \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{110                 \}}
\DoxyCodeLine{111             \}}
\DoxyCodeLine{112             \textcolor{keywordflow}{return} SDK\_SUCCESS;}
\DoxyCodeLine{113         \}}
\DoxyCodeLine{114     \textcolor{keyword}{public}:}
\DoxyCodeLine{115 }
\DoxyCodeLine{119         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a4c764ca6cd71d48b99fd45d11e168479}{SDKBitMap}}()}
\DoxyCodeLine{120             : pixels\_(NULL),}
\DoxyCodeLine{121               numColors\_(0),}
\DoxyCodeLine{122               colors\_(NULL),}
\DoxyCodeLine{123               isLoaded\_(false)}
\DoxyCodeLine{124         \{\}}
\DoxyCodeLine{125 }
\DoxyCodeLine{136         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_ab50802cac19aece4259d3ebedf5d181f}{SDKBitMap}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} * filename)}
\DoxyCodeLine{137             : pixels\_(NULL),}
\DoxyCodeLine{138               numColors\_(0),}
\DoxyCodeLine{139               colors\_(NULL),}
\DoxyCodeLine{140               isLoaded\_(false)}
\DoxyCodeLine{141         \{}
\DoxyCodeLine{142             \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a39a587a66f0e3c31313e0647ffdc27ef}{load}}(filename);}
\DoxyCodeLine{143         \}}
\DoxyCodeLine{144 }
\DoxyCodeLine{150         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_af62cd7f34ee4e5a285a3389517d4004d}{SDKBitMap}}(\textcolor{keyword}{const} \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map}{SDKBitMap}}\& rhs)}
\DoxyCodeLine{151         \{}
\DoxyCodeLine{152             *\textcolor{keyword}{this} = rhs;}
\DoxyCodeLine{153         \}}
\DoxyCodeLine{154 }
\DoxyCodeLine{158         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a44913c8986fc0744ff9f0d32c85db4d7}{\string~SDKBitMap}}()}
\DoxyCodeLine{159         \{}
\DoxyCodeLine{160             releaseResources();}
\DoxyCodeLine{161         \}}
\DoxyCodeLine{162 }
\DoxyCodeLine{167         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map}{SDKBitMap}}\& \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a76569fd08cbcd368a2a8e2f15ae5a280}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map}{SDKBitMap}}\& rhs)}
\DoxyCodeLine{168         \{}
\DoxyCodeLine{169             \textcolor{keywordflow}{if} (\textcolor{keyword}{this} == \&rhs)}
\DoxyCodeLine{170             \{}
\DoxyCodeLine{171                 \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{172             \}}
\DoxyCodeLine{173             \textcolor{comment}{// Copy header}}
\DoxyCodeLine{174             \textcolor{keywordtype}{id}         = rhs.id;}
\DoxyCodeLine{175             size       = rhs.size;}
\DoxyCodeLine{176             reserved1  = rhs.reserved1;}
\DoxyCodeLine{177             reserved2  = rhs.reserved2;}
\DoxyCodeLine{178             offset     = rhs.offset;}
\DoxyCodeLine{179             \textcolor{comment}{// Copy header info}}
\DoxyCodeLine{180             sizeInfo       = rhs.sizeInfo;}
\DoxyCodeLine{181             width          = rhs.width;}
\DoxyCodeLine{182             height         = rhs.height;}
\DoxyCodeLine{183             planes         = rhs.planes;}
\DoxyCodeLine{184             bitsPerPixel   = rhs.bitsPerPixel;}
\DoxyCodeLine{185             compression    = rhs.compression;}
\DoxyCodeLine{186             imageSize      = rhs.imageSize;}
\DoxyCodeLine{187             xPelsPerMeter  = rhs.xPelsPerMeter;}
\DoxyCodeLine{188             yPelsPerMeter  = rhs.yPelsPerMeter;}
\DoxyCodeLine{189             clrUsed        = rhs.clrUsed;}
\DoxyCodeLine{190             clrImportant   = rhs.clrImportant;}
\DoxyCodeLine{191             numColors\_ = rhs.numColors\_;}
\DoxyCodeLine{192             isLoaded\_  = rhs.isLoaded\_;}
\DoxyCodeLine{193             pixels\_    = NULL;}
\DoxyCodeLine{194             colors\_    = NULL;}
\DoxyCodeLine{195             \textcolor{keywordflow}{if} (isLoaded\_)}
\DoxyCodeLine{196             \{}
\DoxyCodeLine{197                 \textcolor{keywordflow}{if} (rhs.colors\_ != NULL)}
\DoxyCodeLine{198                 \{}
\DoxyCodeLine{199                     colors\_ = \textcolor{keyword}{new} \mbox{\hyperlink{namespaceappsdk_afe255fb492387803fce3a8c7f1e24e93}{ColorPalette}}[numColors\_];}
\DoxyCodeLine{200                     \textcolor{keywordflow}{if} (colors\_ == NULL)}
\DoxyCodeLine{201                     \{}
\DoxyCodeLine{202                         isLoaded\_ = \textcolor{keyword}{false};}
\DoxyCodeLine{203                         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{204                     \}}
\DoxyCodeLine{205                     memcpy(colors\_, rhs.colors\_, numColors\_ * \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespaceappsdk_afe255fb492387803fce3a8c7f1e24e93}{ColorPalette}}));}
\DoxyCodeLine{206                 \}}
\DoxyCodeLine{207                 pixels\_ = \textcolor{keyword}{new} uchar4[width * height];}
\DoxyCodeLine{208                 \textcolor{keywordflow}{if} (pixels\_ == NULL)}
\DoxyCodeLine{209                 \{}
\DoxyCodeLine{210                     \textcolor{keyword}{delete}[] colors\_;}
\DoxyCodeLine{211                     colors\_   = NULL;}
\DoxyCodeLine{212                     isLoaded\_ = \textcolor{keyword}{false};}
\DoxyCodeLine{213                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{214                 \}}
\DoxyCodeLine{215                 memcpy(pixels\_, rhs.pixels\_, width * height * \textcolor{keyword}{sizeof}(uchar4));}
\DoxyCodeLine{216             \}}
\DoxyCodeLine{217             \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{218         \}}
\DoxyCodeLine{219 }
\DoxyCodeLine{229         \textcolor{keywordtype}{void}}
\DoxyCodeLine{230         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a39a587a66f0e3c31313e0647ffdc27ef}{load}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} * filename)}
\DoxyCodeLine{231         \{}
\DoxyCodeLine{232             \textcolor{keywordtype}{size\_t} val;}
\DoxyCodeLine{233             \textcolor{comment}{// Release any existing resources}}
\DoxyCodeLine{234             releaseResources();}
\DoxyCodeLine{235             \textcolor{comment}{// Open BMP file}}
\DoxyCodeLine{236             FILE * fd = fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{237             \textcolor{comment}{// FILE *fd;}}
\DoxyCodeLine{238             \textcolor{comment}{//fopen\_s(\&fd, filename, "{}rb"{});}}
\DoxyCodeLine{239             \textcolor{comment}{// Opened OK}}
\DoxyCodeLine{240             \textcolor{keywordflow}{if} (fd != NULL)}
\DoxyCodeLine{241             \{}
\DoxyCodeLine{242                 \textcolor{comment}{// Read header}}
\DoxyCodeLine{243                 val = fread((\mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}} *)\textcolor{keyword}{this}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}}), 1, fd);}
\DoxyCodeLine{244                 \textcolor{comment}{// Failed to read header}}
\DoxyCodeLine{245                 \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{246                 \{}
\DoxyCodeLine{247                     fclose(fd);}
\DoxyCodeLine{248                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{249                 \}}
\DoxyCodeLine{250                 \textcolor{comment}{// Confirm that we have a bitmap file}}
\DoxyCodeLine{251                 \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id} != bitMapID)}
\DoxyCodeLine{252                 \{}
\DoxyCodeLine{253                     fclose(fd);}
\DoxyCodeLine{254                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{255                 \}}
\DoxyCodeLine{256                 \textcolor{comment}{// Read map info header}}
\DoxyCodeLine{257                 val = fread((\mbox{\hyperlink{structappsdk_1_1_bit_map_info_header}{BitMapInfoHeader}} *)\textcolor{keyword}{this}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structappsdk_1_1_bit_map_info_header}{BitMapInfoHeader}}), 1, fd);}
\DoxyCodeLine{258                 \textcolor{comment}{// Failed to read map info header}}
\DoxyCodeLine{259                 \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{260                 \{}
\DoxyCodeLine{261                     fclose(fd);}
\DoxyCodeLine{262                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{263                 \}}
\DoxyCodeLine{264                 \textcolor{comment}{// No support for compressed images}}
\DoxyCodeLine{265                 \textcolor{keywordflow}{if} (compression)}
\DoxyCodeLine{266                 \{}
\DoxyCodeLine{267                     fclose(fd);}
\DoxyCodeLine{268                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{269                 \}}
\DoxyCodeLine{270                 \textcolor{comment}{// Support only 8 or 24 bits images}}
\DoxyCodeLine{271                 \textcolor{keywordflow}{if} (bitsPerPixel < 8)}
\DoxyCodeLine{272                 \{}
\DoxyCodeLine{273                     fclose(fd);}
\DoxyCodeLine{274                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{275                 \}}
\DoxyCodeLine{276                 \textcolor{comment}{// Store number of colors}}
\DoxyCodeLine{277                 numColors\_ = 1 << bitsPerPixel;}
\DoxyCodeLine{278                 \textcolor{comment}{//load the palate for 8 bits per pixel}}
\DoxyCodeLine{279                 \textcolor{keywordflow}{if}(bitsPerPixel == 8)}
\DoxyCodeLine{280                 \{}
\DoxyCodeLine{281                     colors\_ = \textcolor{keyword}{new} \mbox{\hyperlink{namespaceappsdk_afe255fb492387803fce3a8c7f1e24e93}{ColorPalette}}[numColors\_];}
\DoxyCodeLine{282                     \textcolor{keywordflow}{if} (colors\_ == NULL)}
\DoxyCodeLine{283                     \{}
\DoxyCodeLine{284                         fclose(fd);}
\DoxyCodeLine{285                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{286                     \}}
\DoxyCodeLine{287                     val  = fread(}
\DoxyCodeLine{288                         (\textcolor{keywordtype}{char} *)colors\_,}
\DoxyCodeLine{289                         numColors\_ * \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespaceappsdk_afe255fb492387803fce3a8c7f1e24e93}{ColorPalette}}),}
\DoxyCodeLine{290                         1,}
\DoxyCodeLine{291                         fd);}
\DoxyCodeLine{292                     \textcolor{comment}{// Failed to read colors}}
\DoxyCodeLine{293                     \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{294                     \{}
\DoxyCodeLine{295                         fclose(fd);}
\DoxyCodeLine{296                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{297                     \}}
\DoxyCodeLine{298                 \}}
\DoxyCodeLine{299                 \textcolor{comment}{// Allocate buffer to hold all pixels}}
\DoxyCodeLine{300                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} sizeBuffer = size -\/ offset;}
\DoxyCodeLine{301                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * tmpPixels = \textcolor{keyword}{new} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}[sizeBuffer];}
\DoxyCodeLine{302                 \textcolor{keywordflow}{if} (tmpPixels == NULL)}
\DoxyCodeLine{303                 \{}
\DoxyCodeLine{304                     \textcolor{keyword}{delete} colors\_;}
\DoxyCodeLine{305                     colors\_ = NULL;}
\DoxyCodeLine{306                     fclose(fd);}
\DoxyCodeLine{307                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{308                 \}}
\DoxyCodeLine{309                 \textcolor{comment}{// Read pixels from file, including any padding}}
\DoxyCodeLine{310                 val = fread(tmpPixels, sizeBuffer * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}), 1, fd);}
\DoxyCodeLine{311                 \textcolor{comment}{// Failed to read pixel data}}
\DoxyCodeLine{312                 \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{313                 \{}
\DoxyCodeLine{314                     \textcolor{keyword}{delete} colors\_;}
\DoxyCodeLine{315                     colors\_ = NULL;}
\DoxyCodeLine{316                     \textcolor{keyword}{delete} [] tmpPixels;}
\DoxyCodeLine{317                     fclose(fd);}
\DoxyCodeLine{318                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{319                 \}}
\DoxyCodeLine{320                 \textcolor{comment}{// Allocate image}}
\DoxyCodeLine{321                 pixels\_ = \textcolor{keyword}{new} uchar4[width * height];}
\DoxyCodeLine{322                 \textcolor{keywordflow}{if} (pixels\_ == NULL)}
\DoxyCodeLine{323                 \{}
\DoxyCodeLine{324                     \textcolor{keyword}{delete} colors\_;}
\DoxyCodeLine{325                     colors\_ = NULL;}
\DoxyCodeLine{326                     \textcolor{keyword}{delete} [] tmpPixels;}
\DoxyCodeLine{327                     fclose(fd);}
\DoxyCodeLine{328                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{329                 \}}
\DoxyCodeLine{330                 \textcolor{comment}{// Set image, including w component (white)}}
\DoxyCodeLine{331                 memset(pixels\_, 0xff, width * height * \textcolor{keyword}{sizeof}(uchar4));}
\DoxyCodeLine{332                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} index = 0;}
\DoxyCodeLine{333                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} y = 0; y < height; y++)}
\DoxyCodeLine{334                 \{}
\DoxyCodeLine{335                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} x = 0; x < width; x++)}
\DoxyCodeLine{336                     \{}
\DoxyCodeLine{337                         \textcolor{comment}{// Read RGB values}}
\DoxyCodeLine{338                         \textcolor{keywordflow}{if} (bitsPerPixel == 8)}
\DoxyCodeLine{339                         \{}
\DoxyCodeLine{340                             pixels\_[(y * width + x)] = colors\_[tmpPixels[index++]];}
\DoxyCodeLine{341                         \}}
\DoxyCodeLine{342                         \textcolor{keywordflow}{else}   \textcolor{comment}{// 24 bit}}
\DoxyCodeLine{343                         \{}
\DoxyCodeLine{344                             pixels\_[(y * width + x)].z = tmpPixels[index++];}
\DoxyCodeLine{345                             pixels\_[(y * width + x)].y = tmpPixels[index++];}
\DoxyCodeLine{346                             pixels\_[(y * width + x)].x = tmpPixels[index++];}
\DoxyCodeLine{347                         \}}
\DoxyCodeLine{348                     \}}
\DoxyCodeLine{349                     \textcolor{comment}{// Handle padding}}
\DoxyCodeLine{350                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} x = 0; x < (4 -\/ (3 * width) \% 4) \% 4; x++)}
\DoxyCodeLine{351                     \{}
\DoxyCodeLine{352                         index++;}
\DoxyCodeLine{353                     \}}
\DoxyCodeLine{354                 \}}
\DoxyCodeLine{355                 \textcolor{comment}{// Loaded file so we can close the file.}}
\DoxyCodeLine{356                 fclose(fd);}
\DoxyCodeLine{357                 \textcolor{keyword}{delete}[] tmpPixels;}
\DoxyCodeLine{358                 \textcolor{comment}{// Loaded file so record this fact}}
\DoxyCodeLine{359                 isLoaded\_  = \textcolor{keyword}{true};}
\DoxyCodeLine{360             \}}
\DoxyCodeLine{361         \}}
\DoxyCodeLine{362 }
\DoxyCodeLine{373         \textcolor{keywordtype}{bool}}
\DoxyCodeLine{374         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a10c574763ae96158a430f0fcf8c3ee8f}{write}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} * filename)}
\DoxyCodeLine{375         \{}
\DoxyCodeLine{376             \textcolor{keywordflow}{if} (!isLoaded\_)}
\DoxyCodeLine{377             \{}
\DoxyCodeLine{378                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{379             \}}
\DoxyCodeLine{380             \textcolor{comment}{// Open BMP file}}
\DoxyCodeLine{381             FILE * fd = fopen(filename, \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{382             \textcolor{comment}{//FILE * fd;}}
\DoxyCodeLine{383             \textcolor{comment}{//fopen\_s(\&fd, filename, "{}wb"{});}}
\DoxyCodeLine{384             \textcolor{comment}{// Opened OK}}
\DoxyCodeLine{385             \textcolor{keywordflow}{if} (fd != NULL)}
\DoxyCodeLine{386             \{}
\DoxyCodeLine{387                 \textcolor{comment}{// Write header}}
\DoxyCodeLine{388                 fwrite((\mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}} *)\textcolor{keyword}{this}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}}), 1, fd);}
\DoxyCodeLine{389                 \textcolor{comment}{// Failed to write header}}
\DoxyCodeLine{390                 \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{391                 \{}
\DoxyCodeLine{392                     fclose(fd);}
\DoxyCodeLine{393                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{394                 \}}
\DoxyCodeLine{395                 \textcolor{comment}{// Write map info header}}
\DoxyCodeLine{396                 fwrite((\mbox{\hyperlink{structappsdk_1_1_bit_map_info_header}{BitMapInfoHeader}} *)\textcolor{keyword}{this}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structappsdk_1_1_bit_map_info_header}{BitMapInfoHeader}}), 1, fd);}
\DoxyCodeLine{397                 \textcolor{comment}{// Failed to write map info header}}
\DoxyCodeLine{398                 \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{399                 \{}
\DoxyCodeLine{400                     fclose(fd);}
\DoxyCodeLine{401                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{402                 \}}
\DoxyCodeLine{403                 \textcolor{comment}{// Write palate for 8 bits per pixel}}
\DoxyCodeLine{404                 \textcolor{keywordflow}{if}(bitsPerPixel == 8)}
\DoxyCodeLine{405                 \{}
\DoxyCodeLine{406                     fwrite(}
\DoxyCodeLine{407                         (\textcolor{keywordtype}{char} *)colors\_,}
\DoxyCodeLine{408                         numColors\_ * \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespaceappsdk_afe255fb492387803fce3a8c7f1e24e93}{ColorPalette}}),}
\DoxyCodeLine{409                         1,}
\DoxyCodeLine{410                         fd);}
\DoxyCodeLine{411                     \textcolor{comment}{// Failed to write colors}}
\DoxyCodeLine{412                     \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{413                     \{}
\DoxyCodeLine{414                         fclose(fd);}
\DoxyCodeLine{415                         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{416                     \}}
\DoxyCodeLine{417                 \}}
\DoxyCodeLine{418                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} y = 0; y < height; y++)}
\DoxyCodeLine{419                 \{}
\DoxyCodeLine{420                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} x = 0; x < width; x++)}
\DoxyCodeLine{421                     \{}
\DoxyCodeLine{422                         \textcolor{comment}{// Read RGB values}}
\DoxyCodeLine{423                         \textcolor{keywordflow}{if} (bitsPerPixel == 8)}
\DoxyCodeLine{424                         \{}
\DoxyCodeLine{425                             fputc(}
\DoxyCodeLine{426                                 colorIndex(}
\DoxyCodeLine{427                                     pixels\_[(y * width + x)]),}
\DoxyCodeLine{428                                 fd);}
\DoxyCodeLine{429                         \}}
\DoxyCodeLine{430                         \textcolor{keywordflow}{else}   \textcolor{comment}{// 24 bit}}
\DoxyCodeLine{431                         \{}
\DoxyCodeLine{432                             fputc(pixels\_[(y * width + x)].z, fd);}
\DoxyCodeLine{433                             fputc(pixels\_[(y * width + x)].y, fd);}
\DoxyCodeLine{434                             fputc(pixels\_[(y * width + x)].x, fd);}
\DoxyCodeLine{435                             \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{436                             \{}
\DoxyCodeLine{437                                 fclose(fd);}
\DoxyCodeLine{438                                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{439                             \}}
\DoxyCodeLine{440                         \}}
\DoxyCodeLine{441                     \}}
\DoxyCodeLine{442                     \textcolor{comment}{// Add padding}}
\DoxyCodeLine{443                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} x = 0; x < (4 -\/ (3 * width) \% 4) \% 4; x++)}
\DoxyCodeLine{444                     \{}
\DoxyCodeLine{445                         fputc(0, fd);}
\DoxyCodeLine{446                     \}}
\DoxyCodeLine{447                 \}}
\DoxyCodeLine{448                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{449             \}}
\DoxyCodeLine{450             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{451         \}}
\DoxyCodeLine{452 }
\DoxyCodeLine{453         \textcolor{keywordtype}{bool}}
\DoxyCodeLine{454         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a10c574763ae96158a430f0fcf8c3ee8f}{write}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} * filename, \textcolor{keywordtype}{int} width, \textcolor{keywordtype}{int} height, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *ptr)}
\DoxyCodeLine{455         \{}
\DoxyCodeLine{456             \textcolor{comment}{// Open BMP file}}
\DoxyCodeLine{457             FILE * fd = fopen(filename, \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{458             \textcolor{keywordtype}{int} alignSize  = width * 4;}
\DoxyCodeLine{459             alignSize \string^= 0x03;}
\DoxyCodeLine{460             alignSize ++;}
\DoxyCodeLine{461             alignSize \&= 0x03;}
\DoxyCodeLine{462             \textcolor{keywordtype}{int} rowLength = width * 4 + alignSize;}
\DoxyCodeLine{463             \textcolor{comment}{// Opened OK}}
\DoxyCodeLine{464             \textcolor{keywordflow}{if} (fd != NULL)}
\DoxyCodeLine{465             \{}
\DoxyCodeLine{466                 \mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}} *bitMapHeader = \textcolor{keyword}{new} \mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}};}
\DoxyCodeLine{467                 bitMapHeader-\/>id = bitMapID;}
\DoxyCodeLine{468                 bitMapHeader-\/>offset = \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}}) + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structappsdk_1_1_bit_map_info_header}{BitMapInfoHeader}});}
\DoxyCodeLine{469                 bitMapHeader-\/>reserved1 = 0x0000;}
\DoxyCodeLine{470                 bitMapHeader-\/>reserved2 = 0x0000;}
\DoxyCodeLine{471                 bitMapHeader-\/>size = \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}}) + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structappsdk_1_1_bit_map_info_header}{BitMapInfoHeader}}) + rowLength}
\DoxyCodeLine{472                                      * height;}
\DoxyCodeLine{473                 \textcolor{comment}{// Write header}}
\DoxyCodeLine{474                 fwrite(bitMapHeader, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structappsdk_1_1_bit_map_header}{BitMapHeader}}), 1, fd);}
\DoxyCodeLine{475                 \textcolor{comment}{// Failed to write header}}
\DoxyCodeLine{476                 \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{477                 \{}
\DoxyCodeLine{478                     fclose(fd);}
\DoxyCodeLine{479                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{480                 \}}
\DoxyCodeLine{481                 BitMapInfoHeader *bitMapInfoHeader = \textcolor{keyword}{new} BitMapInfoHeader;}
\DoxyCodeLine{482                 bitMapInfoHeader-\/>bitsPerPixel = 32;}
\DoxyCodeLine{483                 bitMapInfoHeader-\/>clrImportant = 0;}
\DoxyCodeLine{484                 bitMapInfoHeader-\/>clrUsed = 0;}
\DoxyCodeLine{485                 bitMapInfoHeader-\/>compression = 0;}
\DoxyCodeLine{486                 bitMapInfoHeader-\/>height = height;}
\DoxyCodeLine{487                 bitMapInfoHeader-\/>imageSize = rowLength * height;}
\DoxyCodeLine{488                 bitMapInfoHeader-\/>planes = 1;}
\DoxyCodeLine{489                 bitMapInfoHeader-\/>sizeInfo = \textcolor{keyword}{sizeof}(BitMapInfoHeader);}
\DoxyCodeLine{490                 bitMapInfoHeader-\/>width = width;}
\DoxyCodeLine{491                 bitMapInfoHeader-\/>xPelsPerMeter = 0;}
\DoxyCodeLine{492                 bitMapInfoHeader-\/>yPelsPerMeter = 0;}
\DoxyCodeLine{493                 \textcolor{comment}{// Write map info header}}
\DoxyCodeLine{494                 fwrite(bitMapInfoHeader, \textcolor{keyword}{sizeof}(BitMapInfoHeader), 1, fd);}
\DoxyCodeLine{495                 \textcolor{comment}{// Failed to write map info header}}
\DoxyCodeLine{496                 \textcolor{keywordflow}{if} (ferror(fd))}
\DoxyCodeLine{497                 \{}
\DoxyCodeLine{498                     fclose(fd);}
\DoxyCodeLine{499                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{500                 \}}
\DoxyCodeLine{501                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} buffer[4];}
\DoxyCodeLine{502                 \textcolor{keywordtype}{int} x, y;}
\DoxyCodeLine{503                 \textcolor{keywordflow}{for} (y = 0; y < height; y++)}
\DoxyCodeLine{504                 \{}
\DoxyCodeLine{505                     \textcolor{keywordflow}{for} (x = 0; x < width; x++, ptr++)}
\DoxyCodeLine{506                     \{}
\DoxyCodeLine{507                         \textcolor{keywordflow}{if}( 4 != fwrite(ptr, 1, 4, fd))}
\DoxyCodeLine{508                         \{}
\DoxyCodeLine{509                             fclose(fd);}
\DoxyCodeLine{510                             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{511                         \}}
\DoxyCodeLine{512                     \}}
\DoxyCodeLine{513                     memset( buffer, 0x00, 4 );}
\DoxyCodeLine{514                     fwrite( buffer, 1, alignSize, fd );}
\DoxyCodeLine{515                 \}}
\DoxyCodeLine{516                 fclose( fd );}
\DoxyCodeLine{517                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{518             \}}
\DoxyCodeLine{519             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{520         \}}
\DoxyCodeLine{521 }
\DoxyCodeLine{528         \textcolor{keywordtype}{int}}
\DoxyCodeLine{529         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a489f282b02b9ca826af212b4106331b9}{getWidth}}(\textcolor{keywordtype}{void})\textcolor{keyword}{ const}}
\DoxyCodeLine{530 \textcolor{keyword}{        }\{}
\DoxyCodeLine{531             \textcolor{keywordflow}{if} (isLoaded\_)}
\DoxyCodeLine{532             \{}
\DoxyCodeLine{533                 \textcolor{keywordflow}{return} width;}
\DoxyCodeLine{534             \}}
\DoxyCodeLine{535             \textcolor{keywordflow}{else}}
\DoxyCodeLine{536             \{}
\DoxyCodeLine{537                 \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{538             \}}
\DoxyCodeLine{539         \}}
\DoxyCodeLine{540 }
\DoxyCodeLine{541 }
\DoxyCodeLine{547         \textcolor{keywordtype}{int} \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a856acd40c4f4159499fb49a975531519}{getNumChannels}}()}
\DoxyCodeLine{548         \{}
\DoxyCodeLine{549             \textcolor{keywordflow}{if} (isLoaded\_)}
\DoxyCodeLine{550             \{}
\DoxyCodeLine{551                 \textcolor{keywordflow}{return} bitsPerPixel / 8;}
\DoxyCodeLine{552             \}}
\DoxyCodeLine{553             \textcolor{keywordflow}{else}}
\DoxyCodeLine{554             \{}
\DoxyCodeLine{555                 \textcolor{keywordflow}{return} SDK\_FAILURE;}
\DoxyCodeLine{556             \}}
\DoxyCodeLine{557         \}}
\DoxyCodeLine{558 }
\DoxyCodeLine{565         \textcolor{keywordtype}{int}}
\DoxyCodeLine{566         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_ab9ece6fe6934ae4d6a6af99733d687b2}{getHeight}}(\textcolor{keywordtype}{void})\textcolor{keyword}{ const}}
\DoxyCodeLine{567 \textcolor{keyword}{        }\{}
\DoxyCodeLine{568             \textcolor{keywordflow}{if} (isLoaded\_)}
\DoxyCodeLine{569             \{}
\DoxyCodeLine{570                 \textcolor{keywordflow}{return} height;}
\DoxyCodeLine{571             \}}
\DoxyCodeLine{572             \textcolor{keywordflow}{else}}
\DoxyCodeLine{573             \{}
\DoxyCodeLine{574                 \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{575             \}}
\DoxyCodeLine{576         \}}
\DoxyCodeLine{577 }
\DoxyCodeLine{584         uchar4 * \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a149d72e92b72885493a8c333b4f93070}{getPixels}}(\textcolor{keywordtype}{void})\textcolor{keyword}{ const}}
\DoxyCodeLine{585 \textcolor{keyword}{        }\{}
\DoxyCodeLine{586             \textcolor{keywordflow}{return} pixels\_;}
\DoxyCodeLine{587         \}}
\DoxyCodeLine{588 }
\DoxyCodeLine{596         \textcolor{keywordtype}{bool}}
\DoxyCodeLine{597         \mbox{\hyperlink{classappsdk_1_1_s_d_k_bit_map_a74b964760c24374d652029603e4951d9}{isLoaded}}(\textcolor{keywordtype}{void})\textcolor{keyword}{ const}}
\DoxyCodeLine{598 \textcolor{keyword}{        }\{}
\DoxyCodeLine{599             \textcolor{keywordflow}{return} isLoaded\_;}
\DoxyCodeLine{600         \}}
\DoxyCodeLine{601 }
\DoxyCodeLine{602 \};}
\DoxyCodeLine{603 \}}
\DoxyCodeLine{604 \textcolor{preprocessor}{\#pragma pack(pop)}}
\DoxyCodeLine{605 \textcolor{preprocessor}{\#endif }\textcolor{comment}{//CL\_BITMAP}}

\end{DoxyCode}
