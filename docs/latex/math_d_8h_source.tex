\hypertarget{math_d_8h_source}{}\doxysection{math\+D.\+h}
\label{math_d_8h_source}\index{/Users/pvelesko/local/CHIP-\/SPV/bitcode/OCML/mathD.h@{/Users/pvelesko/local/CHIP-\/SPV/bitcode/OCML/mathD.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*===-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{2 \textcolor{comment}{ *                   ROCm Device Libraries}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ * This file is distributed under the University of Illinois Open Source}}
\DoxyCodeLine{5 \textcolor{comment}{ * License. See LICENSE.TXT for details.}}
\DoxyCodeLine{6 \textcolor{comment}{ *===-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{comment}{// OCML prototypes}}
\DoxyCodeLine{9 \textcolor{comment}{//\#include "{}ocml.h"{}}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{\#pragma OPENCL EXTENSION cl\_khr\_fp64 : enable}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{comment}{// Tables}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include "{}tables.h"{}}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{comment}{// Builtins}}
\DoxyCodeLine{17 \textcolor{comment}{//\#include "{}builtins.h"{}}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{comment}{// Mangling}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#define MATH\_MANGLE(N) N}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#define MATH\_PRIVATE(N) \_\_priv\#\#N}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{comment}{// mine}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#define MATH\_MAD(x, y, z) fma(x, y, z)}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#define FINITE\_ONLY\_OPT() 0}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#define BUILTIN\_FMA\_F64(x, y, z) fma(x, y, z)}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#define MATH\_SQRT(x) sqrt(x)}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#define MATH\_RCP(x) native\_recip(x)}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#define AS\_DOUBLE(x) as\_double(x)}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#define AS\_LONG(x) as\_long(x)}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#define BUILTIN\_ABS\_F64(x) fabs(x)}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#define BUILTIN\_COPYSIGN\_F64(x, y) copysign(x, y)}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#define MATH\_FAST\_SQRT(x) native\_sqrt(x)}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#define MATH\_DIV(x, y) ((x) / (y))}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#define BUILTIN\_ISNAN\_F64(x) isnan(x)}}
\DoxyCodeLine{36 \textcolor{preprocessor}{\#define BUILTIN\_MAX\_F64(x, y) fmax(x, y)}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#define BUILTIN\_MIN\_F64(x, y) fmin(x, y)}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{preprocessor}{\#define BUILTIN\_RSQRT\_F64(x) native\_rsqrt(x)}}
\DoxyCodeLine{40 \textcolor{preprocessor}{\#define BUILTIN\_ISINF\_F64(x) isinf(x)}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{preprocessor}{\#define BUILTIN\_LOG2\_F32(x) native\_log2(x)}}
\DoxyCodeLine{43 \textcolor{preprocessor}{\#define BUILTIN\_EXP2\_F32(x) native\_exp2(x)}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45 \textcolor{preprocessor}{\#define BUILTIN\_RINT\_F32(x) rint(x)}}
\DoxyCodeLine{46 \textcolor{preprocessor}{\#define BUILTIN\_RINT\_F64(x) rint(x)}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{int} frexp\_exp(\textcolor{keywordtype}{double} x) \{}
\DoxyCodeLine{49   \textcolor{keywordtype}{int} e;}
\DoxyCodeLine{50   \textcolor{keywordtype}{double} mant = frexp(x, \&e);}
\DoxyCodeLine{51   \textcolor{keywordflow}{return} e;}
\DoxyCodeLine{52 \}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{preprocessor}{\#define BUILTIN\_FREXP\_EXP\_F64(x) frexp\_exp(x)}}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#define BUILTIN\_FLDEXP\_F64(x, k) ldexp(x, k)}}
\DoxyCodeLine{56 }
\DoxyCodeLine{57 \textcolor{comment}{// Optimization Controls}}
\DoxyCodeLine{58 \textcolor{comment}{//\#include "{}opts.h"{}}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{comment}{// Attributes}}
\DoxyCodeLine{61 \textcolor{preprocessor}{\#define PUREATTR \_\_attribute\_\_((pure)) \_\_attribute\_\_((overloadable))}}
\DoxyCodeLine{62 \textcolor{preprocessor}{\#define CONSTATTR \_\_attribute\_\_((const)) \_\_attribute\_\_((overloadable))}}
\DoxyCodeLine{63 }
\DoxyCodeLine{64 \textcolor{comment}{// Math controls}}
\DoxyCodeLine{65 \textcolor{comment}{//\#include "{}privD.h"{}}}
\DoxyCodeLine{66 }
\DoxyCodeLine{67 \textcolor{comment}{// Bit patterns}}
\DoxyCodeLine{68 \textcolor{preprocessor}{\#define SIGNBIT\_DP64      0x8000000000000000L}}
\DoxyCodeLine{69 \textcolor{preprocessor}{\#define EXSIGNBIT\_DP64    0x7fffffffffffffffL}}
\DoxyCodeLine{70 \textcolor{preprocessor}{\#define EXPBITS\_DP64      0x7ff0000000000000L}}
\DoxyCodeLine{71 \textcolor{preprocessor}{\#define MANTBITS\_DP64     0x000fffffffffffffL}}
\DoxyCodeLine{72 \textcolor{preprocessor}{\#define ONEEXPBITS\_DP64   0x3ff0000000000000L}}
\DoxyCodeLine{73 \textcolor{preprocessor}{\#define TWOEXPBITS\_DP64   0x4000000000000000L}}
\DoxyCodeLine{74 \textcolor{preprocessor}{\#define HALFEXPBITS\_DP64  0x3fe0000000000000L}}
\DoxyCodeLine{75 \textcolor{preprocessor}{\#define IMPBIT\_DP64       0x0010000000000000L}}
\DoxyCodeLine{76 \textcolor{preprocessor}{\#define QNANBITPATT\_DP64  0x7ff8000000000000L}}
\DoxyCodeLine{77 \textcolor{preprocessor}{\#define INDEFBITPATT\_DP64 0xfff8000000000000L}}
\DoxyCodeLine{78 \textcolor{preprocessor}{\#define PINFBITPATT\_DP64  0x7ff0000000000000L}}
\DoxyCodeLine{79 \textcolor{preprocessor}{\#define NINFBITPATT\_DP64  0xfff0000000000000L}}
\DoxyCodeLine{80 \textcolor{preprocessor}{\#define EXPBIAS\_DP64      1023}}
\DoxyCodeLine{81 \textcolor{preprocessor}{\#define EXPSHIFTBITS\_DP64 52}}
\DoxyCodeLine{82 \textcolor{preprocessor}{\#define BIASEDEMIN\_DP64   1}}
\DoxyCodeLine{83 \textcolor{preprocessor}{\#define EMIN\_DP64         -\/1022}}
\DoxyCodeLine{84 \textcolor{preprocessor}{\#define BIASEDEMAX\_DP64   2046}}
\DoxyCodeLine{85 \textcolor{preprocessor}{\#define EMAX\_DP64         1023}}
\DoxyCodeLine{86 \textcolor{preprocessor}{\#define LAMBDA\_DP64       1.0e300}}
\DoxyCodeLine{87 \textcolor{preprocessor}{\#define MANTLENGTH\_DP64   53}}
\DoxyCodeLine{88 \textcolor{preprocessor}{\#define BASEDIGITS\_DP64   15}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{preprocessor}{\#define CLASS\_PINF 2}}
\DoxyCodeLine{91 \textcolor{preprocessor}{\#define CLASS\_NINF 4}}
\DoxyCodeLine{92 \textcolor{preprocessor}{\#define CLASS\_QNAN 8}}
\DoxyCodeLine{93 \textcolor{preprocessor}{\#define CLASS\_SNAN 16}}
\DoxyCodeLine{94 \textcolor{preprocessor}{\#define CLASS\_PSUB 32}}
\DoxyCodeLine{95 \textcolor{preprocessor}{\#define CLASS\_NSUB 64}}
\DoxyCodeLine{96 \textcolor{preprocessor}{\#define CLASS\_PZER 128}}
\DoxyCodeLine{97 \textcolor{preprocessor}{\#define CLASS\_NZER 256}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 }
\DoxyCodeLine{100 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{long} CONSTATTR BUILTIN\_CLASS\_F64(\textcolor{keywordtype}{double} x, \textcolor{keywordtype}{int} klass)}
\DoxyCodeLine{101 \{}
\DoxyCodeLine{102   \textcolor{keywordflow}{if} ((klass \& CLASS\_PINF) \&\& (as\_long(x) == PINFBITPATT\_DP64))}
\DoxyCodeLine{103     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{104   \textcolor{keywordflow}{if} ((klass \& CLASS\_NINF) \&\& (as\_long(x) == NINFBITPATT\_DP64))}
\DoxyCodeLine{105     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{106 }
\DoxyCodeLine{107   \textcolor{keywordflow}{if} ((klass \& (CLASS\_QNAN|CLASS\_SNAN)) \&\& (as\_long(x) \& QNANBITPATT\_DP64))}
\DoxyCodeLine{108     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{109 }
\DoxyCodeLine{110   \textcolor{keywordflow}{if} ((klass \& (CLASS\_NZER|CLASS\_PZER)) \&\& ((as\_long(x) \& (\string~SIGNBIT\_DP64)) == 0) )}
\DoxyCodeLine{111     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{112 }
\DoxyCodeLine{113   \textcolor{keywordflow}{if} (}
\DoxyCodeLine{114         (klass \& (CLASS\_NSUB|CLASS\_PSUB)) \&\&}
\DoxyCodeLine{115         (}
\DoxyCodeLine{116             ((as\_long(x) \& EXPBITS\_DP64) == 0) \&\& ((as\_long(x) \& MANTBITS\_DP64) != 0)}
\DoxyCodeLine{117         )}
\DoxyCodeLine{118      )}
\DoxyCodeLine{119     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{120 }
\DoxyCodeLine{121   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{122 \}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124 \textcolor{comment}{// declarations}}
\DoxyCodeLine{125 }
\DoxyCodeLine{126 PUREATTR \textcolor{keywordtype}{double} j1(\textcolor{keywordtype}{double} x);}
\DoxyCodeLine{127 PUREATTR \textcolor{keywordtype}{double} j0(\textcolor{keywordtype}{double} x);}
\DoxyCodeLine{128 CONSTATTR \textcolor{keywordtype}{double} erfinv(\textcolor{keywordtype}{double} x);}
\DoxyCodeLine{129 CONSTATTR \textcolor{keywordtype}{double} erfcinv(\textcolor{keywordtype}{double} x);}

\end{DoxyCode}
