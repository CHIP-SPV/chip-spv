\hypertarget{_sine_wave_simulation_8h_source}{}\doxysection{Sine\+Wave\+Simulation.\+h}
\label{_sine_wave_simulation_8h_source}\index{/Users/pvelesko/local/CHIP-\/SPV/HIP/samples/2\_Cookbook/20\_hip\_vulkan/SineWaveSimulation.h@{/Users/pvelesko/local/CHIP-\/SPV/HIP/samples/2\_Cookbook/20\_hip\_vulkan/SineWaveSimulation.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/* Copyright (c) 2020, NVIDIA CORPORATION. All rights reserved.}}
\DoxyCodeLine{2 \textcolor{comment}{ *}}
\DoxyCodeLine{3 \textcolor{comment}{ * Redistribution and use in source and binary forms, with or without}}
\DoxyCodeLine{4 \textcolor{comment}{ * modification, are permitted provided that the following conditions}}
\DoxyCodeLine{5 \textcolor{comment}{ * are met:}}
\DoxyCodeLine{6 \textcolor{comment}{ *  * Redistributions of source code must retain the above copyright}}
\DoxyCodeLine{7 \textcolor{comment}{ *    notice, this list of conditions and the following disclaimer.}}
\DoxyCodeLine{8 \textcolor{comment}{ *  * Redistributions in binary form must reproduce the above copyright}}
\DoxyCodeLine{9 \textcolor{comment}{ *    notice, this list of conditions and the following disclaimer in the}}
\DoxyCodeLine{10 \textcolor{comment}{ *    documentation and/or other materials provided with the distribution.}}
\DoxyCodeLine{11 \textcolor{comment}{ *  * Neither the name of NVIDIA CORPORATION nor the names of its}}
\DoxyCodeLine{12 \textcolor{comment}{ *    contributors may be used to endorse or promote products derived}}
\DoxyCodeLine{13 \textcolor{comment}{ *    from this software without specific prior written permission.}}
\DoxyCodeLine{14 \textcolor{comment}{ *}}
\DoxyCodeLine{15 \textcolor{comment}{ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY}}
\DoxyCodeLine{16 \textcolor{comment}{ * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE}}
\DoxyCodeLine{17 \textcolor{comment}{ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR}}
\DoxyCodeLine{18 \textcolor{comment}{ * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR}}
\DoxyCodeLine{19 \textcolor{comment}{ * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,}}
\DoxyCodeLine{20 \textcolor{comment}{ * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,}}
\DoxyCodeLine{21 \textcolor{comment}{ * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR}}
\DoxyCodeLine{22 \textcolor{comment}{ * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY}}
\DoxyCodeLine{23 \textcolor{comment}{ * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT}}
\DoxyCodeLine{24 \textcolor{comment}{ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE}}
\DoxyCodeLine{25 \textcolor{comment}{ * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.}}
\DoxyCodeLine{26 \textcolor{comment}{ */}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{comment}{/*}}
\DoxyCodeLine{29 \textcolor{comment}{ * Modifications Copyright (C)2021 Advanced}}
\DoxyCodeLine{30 \textcolor{comment}{ * Micro Devices, Inc. All rights reserved.}}
\DoxyCodeLine{31 \textcolor{comment}{ */}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#ifndef \_\_SINESIM\_H\_\_}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#define \_\_SINESIM\_H\_\_}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{hip__runtime__api_8h}{hip/hip\_runtime\_api.h}}>}}
\DoxyCodeLine{39 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{40 \textcolor{preprocessor}{\#include "{}linmath.h"{}}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{keyword}{class }\mbox{\hyperlink{class_sine_wave_simulation}{SineWaveSimulation}}}
\DoxyCodeLine{43 \{}
\DoxyCodeLine{44     \textcolor{keywordtype}{float} *m\_heightMap;}
\DoxyCodeLine{45     \textcolor{keywordtype}{size\_t} m\_width, m\_height;}
\DoxyCodeLine{46     \textcolor{keywordtype}{int} m\_blocks, m\_threads;}
\DoxyCodeLine{47 \textcolor{keyword}{public}:}
\DoxyCodeLine{48     \mbox{\hyperlink{class_sine_wave_simulation}{SineWaveSimulation}}(\textcolor{keywordtype}{size\_t} width, \textcolor{keywordtype}{size\_t} height);}
\DoxyCodeLine{49     \mbox{\hyperlink{class_sine_wave_simulation}{\string~SineWaveSimulation}}();}
\DoxyCodeLine{50     \textcolor{keywordtype}{void} initSimulation(\textcolor{keywordtype}{float} *heightMap);}
\DoxyCodeLine{51     \textcolor{keywordtype}{void} stepSimulation(\textcolor{keywordtype}{float} time, \mbox{\hyperlink{class_c_h_i_p_queue}{hipStream\_t}} stream = 0);}
\DoxyCodeLine{52     \textcolor{keywordtype}{void} initCudaLaunchConfig(\textcolor{keywordtype}{int} device);}
\DoxyCodeLine{53     \textcolor{keywordtype}{int} initCuda(uint8\_t  *vkDeviceUUID, \textcolor{keywordtype}{size\_t} UUID\_SIZE);}
\DoxyCodeLine{54 }
\DoxyCodeLine{55     \textcolor{keywordtype}{size\_t} getWidth()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{56         \textcolor{keywordflow}{return} m\_width;}
\DoxyCodeLine{57     \}}
\DoxyCodeLine{58     \textcolor{keywordtype}{size\_t} getHeight()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{59         \textcolor{keywordflow}{return} m\_height;}
\DoxyCodeLine{60     \}}
\DoxyCodeLine{61 \};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{64 \textcolor{keywordtype}{void} check(T result, \textcolor{keywordtype}{char} \textcolor{keyword}{const}* \textcolor{keyword}{const} func, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \textcolor{keyword}{const} \mbox{\hyperlink{classfile}{file}},}
\DoxyCodeLine{65   \textcolor{keywordtype}{int} \textcolor{keyword}{const} line) \{}
\DoxyCodeLine{66   \textcolor{keywordflow}{if} (result) \{}
\DoxyCodeLine{67     fprintf(stderr, \textcolor{stringliteral}{"{}HIP error at \%s:\%d code=\%d \(\backslash\)"{}\%s\(\backslash\)"{} \(\backslash\)n"{}}, \mbox{\hyperlink{classfile}{file}}, line, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}\textcolor{keyword}{>}(result), func);}
\DoxyCodeLine{68      \textcolor{comment}{// static\_cast<unsigned int>(result), \_cudaGetErrorEnum(result), func);}}
\DoxyCodeLine{69     exit(EXIT\_FAILURE);}
\DoxyCodeLine{70   \}}
\DoxyCodeLine{71 \}}
\DoxyCodeLine{72 }
\DoxyCodeLine{73 \textcolor{comment}{// This will output the proper CUDA error strings in the event}}
\DoxyCodeLine{74 \textcolor{comment}{// that a CUDA host call returns an error}}
\DoxyCodeLine{75 \textcolor{preprocessor}{\#define checkHIPErrors(val) check((val), \#val, \_\_FILE\_\_, \_\_LINE\_\_)}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77 \textcolor{comment}{// This will output the proper error string when calling cudaGetLastError}}
\DoxyCodeLine{78 \textcolor{preprocessor}{\#define getLastHIPError(msg) \_\_getLastHIPError(msg, \_\_FILE\_\_, \_\_LINE\_\_)}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \_\_getLastHIPError(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* errorMessage, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \mbox{\hyperlink{classfile}{file}},}
\DoxyCodeLine{81   \textcolor{keyword}{const} \textcolor{keywordtype}{int} line) \{}
\DoxyCodeLine{82   hipError\_t err = hipGetLastError();}
\DoxyCodeLine{83 }
\DoxyCodeLine{84   \textcolor{keywordflow}{if} (\mbox{\hyperlink{hip__runtime__api_8h_ae4a28dbad173b548a3ac2a2092994d6b}{hipSuccess}} != err) \{}
\DoxyCodeLine{85     fprintf(stderr,}
\DoxyCodeLine{86       \textcolor{stringliteral}{"{}\%s(\%i) : getLastHIPError() HIP error :"{}}}
\DoxyCodeLine{87       \textcolor{stringliteral}{"{} \%s : (\%d) \%s.\(\backslash\)n"{}},}
\DoxyCodeLine{88       \mbox{\hyperlink{classfile}{file}}, line, errorMessage, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(err),}
\DoxyCodeLine{89       hipGetErrorString(err));}
\DoxyCodeLine{90     exit(EXIT\_FAILURE);}
\DoxyCodeLine{91   \}}
\DoxyCodeLine{92   }
\DoxyCodeLine{93 \}}
\DoxyCodeLine{94 }
\DoxyCodeLine{95 }
\DoxyCodeLine{96 }
\DoxyCodeLine{97 \textcolor{preprocessor}{\#ifndef MAX}}
\DoxyCodeLine{98 \textcolor{preprocessor}{\#define MAX(a, b) (a > b ? a : b)}}
\DoxyCodeLine{99 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \_\_SINESIM\_H\_\_}}

\end{DoxyCode}
