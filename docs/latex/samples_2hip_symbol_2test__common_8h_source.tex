\hypertarget{samples_2hip_symbol_2test__common_8h_source}{}\doxysection{test\+\_\+common.\+h}
\label{samples_2hip_symbol_2test__common_8h_source}\index{/Users/pvelesko/local/CHIP-\/SPV/samples/hipSymbol/test\_common.h@{/Users/pvelesko/local/CHIP-\/SPV/samples/hipSymbol/test\_common.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{Copyright (c) 2015-\/2016 Advanced Micro Devices, Inc. All rights reserved.}}
\DoxyCodeLine{3 \textcolor{comment}{Permission is hereby granted, free of charge, to any person obtaining a copy}}
\DoxyCodeLine{4 \textcolor{comment}{of this software and associated documentation files (the "{}Software"{}), to deal}}
\DoxyCodeLine{5 \textcolor{comment}{in the Software without restriction, including without limitation the rights}}
\DoxyCodeLine{6 \textcolor{comment}{to use, copy, modify, merge, publish, distribute, sublicense, and/or sell}}
\DoxyCodeLine{7 \textcolor{comment}{copies of the Software, and to permit persons to whom the Software is}}
\DoxyCodeLine{8 \textcolor{comment}{furnished to do so, subject to the following conditions:}}
\DoxyCodeLine{9 \textcolor{comment}{The above copyright notice and this permission notice shall be included in}}
\DoxyCodeLine{10 \textcolor{comment}{all copies or substantial portions of the Software.}}
\DoxyCodeLine{11 \textcolor{comment}{THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{12 \textcolor{comment}{IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}}
\DoxyCodeLine{13 \textcolor{comment}{FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE}}
\DoxyCodeLine{14 \textcolor{comment}{AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}}
\DoxyCodeLine{15 \textcolor{comment}{LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}}
\DoxyCodeLine{16 \textcolor{comment}{OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN}}
\DoxyCodeLine{17 \textcolor{comment}{THE SOFTWARE.}}
\DoxyCodeLine{18 \textcolor{comment}{*/}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{comment}{/*}}
\DoxyCodeLine{21 \textcolor{comment}{ * File is intended to C and CPP compliant hence any CPP specic changes}}
\DoxyCodeLine{22 \textcolor{comment}{ * should be added into CPP section}}
\DoxyCodeLine{23 \textcolor{comment}{ *}}
\DoxyCodeLine{24 \textcolor{comment}{ */}}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{27 \textcolor{preprocessor}{    \#include <iostream>}}
\DoxyCodeLine{28 \textcolor{preprocessor}{    \#include <iomanip>}}
\DoxyCodeLine{29 \textcolor{preprocessor}{    \#if \_\_CUDACC\_\_}}
\DoxyCodeLine{30 \textcolor{preprocessor}{        \#include <sys/time.h>}}
\DoxyCodeLine{31 \textcolor{preprocessor}{    \#else}}
\DoxyCodeLine{32 \textcolor{preprocessor}{        \#include <chrono>}}
\DoxyCodeLine{33 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{comment}{// ************************ GCC section **************************}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#include <stddef.h>}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{preprocessor}{\#include "{}hip/hip\_runtime.h"{}}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{preprocessor}{\#define HC \_\_attribute\_\_((hc))}}
\DoxyCodeLine{42 }
\DoxyCodeLine{43 \textcolor{preprocessor}{\#define KNRM "{}\(\backslash\)x1B[0m"{}}}
\DoxyCodeLine{44 \textcolor{preprocessor}{\#define KRED "{}\(\backslash\)x1B[31m"{}}}
\DoxyCodeLine{45 \textcolor{preprocessor}{\#define KGRN "{}\(\backslash\)x1B[32m"{}}}
\DoxyCodeLine{46 \textcolor{preprocessor}{\#define KYEL "{}\(\backslash\)x1B[33m"{}}}
\DoxyCodeLine{47 \textcolor{preprocessor}{\#define KBLU "{}\(\backslash\)x1B[34m"{}}}
\DoxyCodeLine{48 \textcolor{preprocessor}{\#define KMAG "{}\(\backslash\)x1B[35m"{}}}
\DoxyCodeLine{49 \textcolor{preprocessor}{\#define KCYN "{}\(\backslash\)x1B[36m"{}}}
\DoxyCodeLine{50 \textcolor{preprocessor}{\#define KWHT "{}\(\backslash\)x1B[37m"{}}}
\DoxyCodeLine{51 }
\DoxyCodeLine{52   \textcolor{comment}{// HIP Skip Return code set at cmake}}
\DoxyCodeLine{53 \textcolor{preprocessor}{\#define HIP\_SKIP\_RETURN\_CODE 127}}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#define HIP\_ENABLE\_SKIP\_TESTS 0}}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} hip\_skip\_tests\_enabled() \{}
\DoxyCodeLine{57   \textcolor{keywordflow}{return} HIP\_ENABLE\_SKIP\_TESTS;}
\DoxyCodeLine{58 \}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{keyword}{inline} \textcolor{keywordtype}{int} hip\_skip\_retcode() \{}
\DoxyCodeLine{61   \textcolor{comment}{// HIP Skip Return code set at cmake}}
\DoxyCodeLine{62   \textcolor{keywordflow}{return} HIP\_SKIP\_RETURN\_CODE;}
\DoxyCodeLine{63 \}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 \textcolor{preprocessor}{\#define passed()                                                                                   \(\backslash\)}}
\DoxyCodeLine{66 \textcolor{preprocessor}{    printf("{}\%sPASSED!\%s\(\backslash\)n"{}}, KGRN, KNRM);                                                           \(\backslash\)}
\DoxyCodeLine{67     exit(0);}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \textcolor{comment}{// The real "{}assert"{} would have written to stderr. But it is}}
\DoxyCodeLine{70 \textcolor{comment}{// sufficient to just fflush here without getting pedantic. This also}}
\DoxyCodeLine{71 \textcolor{comment}{// ensures that we don't lose any earlier writes to stdout.}}
\DoxyCodeLine{72 \textcolor{preprocessor}{\#define failed(...)                                                                                \(\backslash\)}}
\DoxyCodeLine{73 \textcolor{preprocessor}{    printf("{}\%serror: "{}}, KRED);                                                                     \(\backslash\)}
\DoxyCodeLine{74     printf(\_\_VA\_ARGS\_\_);                                                                           \(\backslash\)}
\DoxyCodeLine{75     printf("{}\(\backslash\)n"{});                                                                                  \(\backslash\)}
\DoxyCodeLine{76     printf("{}error: TEST FAILED\(\backslash\)n\%s"{}, KNRM);                                                        \(\backslash\)}
\DoxyCodeLine{77     fflush(NULL);                                                                               \(\backslash\)}
\DoxyCodeLine{78     abort();}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 \textcolor{preprocessor}{\#define warn(...)                                                                                  \(\backslash\)}}
\DoxyCodeLine{81 \textcolor{preprocessor}{    printf("{}\%swarn: "{}}, KYEL);                                                                      \(\backslash\)}
\DoxyCodeLine{82     printf(\_\_VA\_ARGS\_\_);                                                                           \(\backslash\)}
\DoxyCodeLine{83     printf("{}\(\backslash\)n"{});                                                                                  \(\backslash\)}
\DoxyCodeLine{84     printf("{}warn: TEST WARNING\(\backslash\)n\%s"{}, KNRM);}
\DoxyCodeLine{85 }
\DoxyCodeLine{86 \textcolor{preprocessor}{\#define HIP\_PRINT\_STATUS(status)                                                                   \(\backslash\)}}
\DoxyCodeLine{87 \textcolor{preprocessor}{    std::cout << hipGetErrorName(status) << "{} at line: "{}} << \_\_LINE\_\_ << std::endl;}
\DoxyCodeLine{88 }
\DoxyCodeLine{89 \textcolor{preprocessor}{\#define HIPCHECK(error)                                                                            \(\backslash\)}}
\DoxyCodeLine{90 \textcolor{preprocessor}{    \{                                                                                              \(\backslash\)}}
\DoxyCodeLine{91 \textcolor{preprocessor}{        hipError\_t localError = error;                                                             \(\backslash\)}}
\DoxyCodeLine{92 \textcolor{preprocessor}{        if ((localError != hipSuccess) \&\& (localError != hipErrorPeerAccessAlreadyEnabled)) \{      \(\backslash\)}}
\DoxyCodeLine{93 \textcolor{preprocessor}{            printf("{}\%serror: '\%s'(\%d) from \%s at \%s:\%d\%s\(\backslash\)n"{}}, KRED, hipGetErrorString(localError),  \(\backslash\)}
\DoxyCodeLine{94                    localError, \#error, \_\_FILE\_\_, \_\_LINE\_\_, KNRM);                                  \(\backslash\)}
\DoxyCodeLine{95             failed("{}API returned error code."{});                                                    \(\backslash\)}
\DoxyCodeLine{96         \}                                                                                          \(\backslash\)}
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 \textcolor{preprocessor}{\#define HIPASSERT(condition)                                                                       \(\backslash\)}}
\DoxyCodeLine{100 \textcolor{preprocessor}{    if (!(condition)) \{                                                                            \(\backslash\)}}
\DoxyCodeLine{101 \textcolor{preprocessor}{        failed("{}\%sassertion \%s at \%s:\%d\%s \(\backslash\)n"{}}, KRED, \#condition, \_\_FILE\_\_, \_\_LINE\_\_, KNRM);        \(\backslash\)}
\DoxyCodeLine{102     \}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104 }
\DoxyCodeLine{105 \textcolor{preprocessor}{\#define HIPCHECK\_API(API\_CALL, EXPECTED\_ERROR)                                                     \(\backslash\)}}
\DoxyCodeLine{106 \textcolor{preprocessor}{    \{                                                                                              \(\backslash\)}}
\DoxyCodeLine{107 \textcolor{preprocessor}{        hipError\_t \_e = (API\_CALL);                                                                \(\backslash\)}}
\DoxyCodeLine{108 \textcolor{preprocessor}{        if (\_e != (EXPECTED\_ERROR)) \{                                                              \(\backslash\)}}
\DoxyCodeLine{109 \textcolor{preprocessor}{            failed("{}\%sAPI '\%s' returned \%d(\%s) but test expected \%d(\%s) at \%s:\%d\%s \(\backslash\)n"{}}, KRED,      \(\backslash\)}
\DoxyCodeLine{110                    \#API\_CALL, \_e, hipGetErrorName(\_e), EXPECTED\_ERROR,                             \(\backslash\)}
\DoxyCodeLine{111                    hipGetErrorName(EXPECTED\_ERROR), \_\_FILE\_\_, \_\_LINE\_\_, KNRM);                     \(\backslash\)}
\DoxyCodeLine{112         \}                                                                                          \(\backslash\)}
\DoxyCodeLine{113     \}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115 \textcolor{preprocessor}{\#ifdef \_WIN64}}
\DoxyCodeLine{116 \textcolor{preprocessor}{\#include <tchar.h>}}
\DoxyCodeLine{117 \textcolor{preprocessor}{\#define aligned\_alloc(x,y) \_aligned\_malloc(y,x)}}
\DoxyCodeLine{118 \textcolor{preprocessor}{\#define aligned\_free(x) \_aligned\_free(x)}}
\DoxyCodeLine{119 \textcolor{preprocessor}{\#define popen(x,y) \_popen(x,y)}}
\DoxyCodeLine{120 \textcolor{preprocessor}{\#define pclose(x) \_pclose(x)}}
\DoxyCodeLine{121 \textcolor{preprocessor}{\#define setenv(x,y,z) \_putenv\_s(x,y)}}
\DoxyCodeLine{122 \textcolor{preprocessor}{\#define unsetenv \_putenv}}
\DoxyCodeLine{123 \textcolor{preprocessor}{\#define fileno(x) \_fileno(x)}}
\DoxyCodeLine{124 \textcolor{preprocessor}{\#define dup(x) \_dup(x)}}
\DoxyCodeLine{125 \textcolor{preprocessor}{\#define dup2(x,y) \_dup2(x,y)}}
\DoxyCodeLine{126 \textcolor{preprocessor}{\#define close(x) \_close(x)}}
\DoxyCodeLine{127 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{128 \textcolor{preprocessor}{\#define aligned\_free(x) free(x)}}
\DoxyCodeLine{129 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 \textcolor{comment}{// standard command-\/line variables:}}
\DoxyCodeLine{132 \textcolor{keyword}{extern} \textcolor{keywordtype}{size\_t} N;}
\DoxyCodeLine{133 \textcolor{keyword}{extern} \textcolor{keywordtype}{char} memsetval;}
\DoxyCodeLine{134 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} memsetD32val;}
\DoxyCodeLine{135 \textcolor{keyword}{extern} \textcolor{keywordtype}{short} memsetD16val;}
\DoxyCodeLine{136 \textcolor{keyword}{extern} \textcolor{keywordtype}{char} memsetD8val;}
\DoxyCodeLine{137 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} iterations;}
\DoxyCodeLine{138 \textcolor{keyword}{extern} \textcolor{keywordtype}{unsigned} blocksPerCU;}
\DoxyCodeLine{139 \textcolor{keyword}{extern} \textcolor{keywordtype}{unsigned} threadsPerBlock;}
\DoxyCodeLine{140 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} p\_gpuDevice;}
\DoxyCodeLine{141 \textcolor{keyword}{extern} \textcolor{keywordtype}{unsigned} p\_verbose;}
\DoxyCodeLine{142 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} p\_tests;}
\DoxyCodeLine{143 \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* HIP\_VISIBLE\_DEVICES\_STR;}
\DoxyCodeLine{144 \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* CUDA\_VISIBLE\_DEVICES\_STR;}
\DoxyCodeLine{145 \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* PATH\_SEPERATOR\_STR;}
\DoxyCodeLine{146 \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* NULL\_DEVICE;}
\DoxyCodeLine{147 }
\DoxyCodeLine{148 \textcolor{comment}{// ********************* CPP section *********************}}
\DoxyCodeLine{149 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{150 }
\DoxyCodeLine{151 \textcolor{preprocessor}{\#ifdef \_\_HIP\_PLATFORM\_HCC}}
\DoxyCodeLine{152 \textcolor{preprocessor}{\#define TYPENAME(T) typeid(T).name()}}
\DoxyCodeLine{153 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{154 \textcolor{preprocessor}{\#define TYPENAME(T) "{}?"{}}}
\DoxyCodeLine{155 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 \textcolor{keyword}{namespace }HipTest \{}
\DoxyCodeLine{158 }
\DoxyCodeLine{159 \textcolor{comment}{// Returns the current system time in microseconds}}
\DoxyCodeLine{160 \textcolor{keyword}{inline} \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} get\_time() \{}
\DoxyCodeLine{161 \textcolor{preprocessor}{\#if \_\_CUDACC\_\_}}
\DoxyCodeLine{162     \textcolor{keyword}{struct }timeval tv;}
\DoxyCodeLine{163     gettimeofday(\&tv, 0);}
\DoxyCodeLine{164     \textcolor{keywordflow}{return} (tv.tv\_sec * 1000000) + tv.tv\_usec;}
\DoxyCodeLine{165 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{166     \textcolor{keywordflow}{return} std::chrono::high\_resolution\_clock::now().time\_since\_epoch()}
\DoxyCodeLine{167         /std::chrono::microseconds(1);}
\DoxyCodeLine{168 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{169 \}}
\DoxyCodeLine{170 }
\DoxyCodeLine{171 \textcolor{keywordtype}{double} elapsed\_time(\textcolor{keywordtype}{long} \textcolor{keywordtype}{long} startTimeUs, \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} stopTimeUs);}
\DoxyCodeLine{172 }
\DoxyCodeLine{173 \textcolor{keywordtype}{int} parseSize(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* str, \textcolor{keywordtype}{size\_t}* output);}
\DoxyCodeLine{174 \textcolor{keywordtype}{int} parseUInt(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* str, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}* output);}
\DoxyCodeLine{175 \textcolor{keywordtype}{int} parseInt(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* str, \textcolor{keywordtype}{int}* output);}
\DoxyCodeLine{176 \textcolor{keywordtype}{int} parseStandardArguments(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}* argv[], \textcolor{keywordtype}{bool} failOnUndefinedArg);}
\DoxyCodeLine{177 }
\DoxyCodeLine{178 \textcolor{keywordtype}{unsigned} setNumBlocks(\textcolor{keywordtype}{unsigned} blocksPerCU, \textcolor{keywordtype}{unsigned} threadsPerBlock, \textcolor{keywordtype}{size\_t} N);}
\DoxyCodeLine{179 }
\DoxyCodeLine{180 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T> \textcolor{comment}{// pointer type}}
\DoxyCodeLine{181 \textcolor{keywordtype}{void} checkArray(T hData, T hOutputData, \textcolor{keywordtype}{size\_t} width, \textcolor{keywordtype}{size\_t} height,\textcolor{keywordtype}{size\_t} depth)}
\DoxyCodeLine{182 \{}
\DoxyCodeLine{183    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < depth; i++) \{}
\DoxyCodeLine{184       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < height; j++) \{}
\DoxyCodeLine{185           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < width; k++) \{}
\DoxyCodeLine{186               \textcolor{keywordtype}{int} offset = i*width*height + j*width + k;}
\DoxyCodeLine{187               \textcolor{keywordflow}{if} (hData[offset] != hOutputData[offset]) \{}
\DoxyCodeLine{188                   std::cerr << \textcolor{charliteral}{'['} << i << \textcolor{charliteral}{','} << j << \textcolor{charliteral}{','} << k << \textcolor{stringliteral}{"{}]:"{}} << hData[offset] << \textcolor{stringliteral}{"{}-\/-\/-\/-\/"{}} << hOutputData[offset]<<\textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{189                   failed(\textcolor{stringliteral}{"{}mistmatch at:\%d \%d \%d"{}},i,j,k);}
\DoxyCodeLine{190               \}}
\DoxyCodeLine{191           \}}
\DoxyCodeLine{192        \}}
\DoxyCodeLine{193    \}}
\DoxyCodeLine{194 \}}
\DoxyCodeLine{195 }
\DoxyCodeLine{196 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T> }
\DoxyCodeLine{197 \textcolor{keywordtype}{void} checkArray(T input, T output, \textcolor{keywordtype}{size\_t} height, \textcolor{keywordtype}{size\_t} width)}
\DoxyCodeLine{198 \{}
\DoxyCodeLine{199     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<height; i++ )\{}
\DoxyCodeLine{200         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0; j<width; j++ )\{}
\DoxyCodeLine{201             \textcolor{keywordtype}{int} offset = i*width + j;}
\DoxyCodeLine{202             \textcolor{keywordflow}{if}( input[offset] !=  output[offset] )\{}
\DoxyCodeLine{203                  std::cerr << \textcolor{charliteral}{'['} << i << \textcolor{charliteral}{','} << j << \textcolor{charliteral}{','} << \textcolor{stringliteral}{"{}]:"{}} << input[offset] << \textcolor{stringliteral}{"{}-\/-\/-\/-\/"{}} << output[offset]<<\textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{204                  failed(\textcolor{stringliteral}{"{}mistmatch at:\%d \%d"{}},i,j);}
\DoxyCodeLine{205             \}}
\DoxyCodeLine{206         \}}
\DoxyCodeLine{207     \}}
\DoxyCodeLine{208 \}}
\DoxyCodeLine{209 }
\DoxyCodeLine{210 }
\DoxyCodeLine{211 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{212 \_\_global\_\_ \textcolor{keywordtype}{void} vectorADD(\textcolor{keyword}{const} T* A\_d, \textcolor{keyword}{const} T* B\_d, T* C\_d, \textcolor{keywordtype}{size\_t} NELEM) \{}
\DoxyCodeLine{213     \textcolor{keywordtype}{size\_t} offset = (blockIdx.x * blockDim.x + threadIdx.x);}
\DoxyCodeLine{214     \textcolor{keywordtype}{size\_t} stride = blockDim.x * gridDim.x;}
\DoxyCodeLine{215 }
\DoxyCodeLine{216     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = offset; i < NELEM; i += stride) \{}
\DoxyCodeLine{217         C\_d[i] = A\_d[i] + B\_d[i];}
\DoxyCodeLine{218     \}}
\DoxyCodeLine{219 \}}
\DoxyCodeLine{220 }
\DoxyCodeLine{221 }
\DoxyCodeLine{222 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{223 \_\_global\_\_ \textcolor{keywordtype}{void} vectorADDReverse(\textcolor{keyword}{const} T* A\_d, \textcolor{keyword}{const} T* B\_d, T* C\_d,}
\DoxyCodeLine{224                                  \textcolor{keywordtype}{size\_t} NELEM) \{}
\DoxyCodeLine{225     \textcolor{keywordtype}{size\_t} offset = (blockIdx.x * blockDim.x + threadIdx.x);}
\DoxyCodeLine{226     \textcolor{keywordtype}{size\_t} stride = blockDim.x * gridDim.x;}
\DoxyCodeLine{227 }
\DoxyCodeLine{228     \textcolor{keywordflow}{for} (int64\_t i = NELEM -\/ stride + offset; i >= 0; i -\/= stride) \{}
\DoxyCodeLine{229         C\_d[i] = A\_d[i] + B\_d[i];}
\DoxyCodeLine{230     \}}
\DoxyCodeLine{231 \}}
\DoxyCodeLine{232 }
\DoxyCodeLine{233 }
\DoxyCodeLine{234 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{235 \_\_global\_\_ \textcolor{keywordtype}{void} addCount(\textcolor{keyword}{const} T* A\_d, T* C\_d, \textcolor{keywordtype}{size\_t} NELEM, \textcolor{keywordtype}{int} count) \{}
\DoxyCodeLine{236     \textcolor{keywordtype}{size\_t} offset = (blockIdx.x * blockDim.x + threadIdx.x);}
\DoxyCodeLine{237     \textcolor{keywordtype}{size\_t} stride = blockDim.x * gridDim.x;}
\DoxyCodeLine{238 }
\DoxyCodeLine{239     \textcolor{comment}{// Deliberately do this in an inefficient way to increase kernel runtime}}
\DoxyCodeLine{240     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; i++) \{}
\DoxyCodeLine{241         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = offset; i < NELEM; i += stride) \{}
\DoxyCodeLine{242             C\_d[i] = A\_d[i] + (T)count;}
\DoxyCodeLine{243         \}}
\DoxyCodeLine{244     \}}
\DoxyCodeLine{245 \}}
\DoxyCodeLine{246 }
\DoxyCodeLine{247 }
\DoxyCodeLine{248 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{249 \_\_global\_\_ \textcolor{keywordtype}{void} addCountReverse(\textcolor{keyword}{const} T* A\_d, T* C\_d, int64\_t NELEM, \textcolor{keywordtype}{int} count) \{}
\DoxyCodeLine{250     \textcolor{keywordtype}{size\_t} offset = (blockIdx.x * blockDim.x + threadIdx.x);}
\DoxyCodeLine{251     \textcolor{keywordtype}{size\_t} stride = blockDim.x * gridDim.x;}
\DoxyCodeLine{252 }
\DoxyCodeLine{253     \textcolor{comment}{// Deliberately do this in an inefficient way to increase kernel runtime}}
\DoxyCodeLine{254     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; i++) \{}
\DoxyCodeLine{255         \textcolor{keywordflow}{for} (int64\_t i = NELEM -\/ stride + offset; i >= 0; i -\/= stride) \{}
\DoxyCodeLine{256             C\_d[i] = A\_d[i] + (T)count;}
\DoxyCodeLine{257         \}}
\DoxyCodeLine{258     \}}
\DoxyCodeLine{259 \}}
\DoxyCodeLine{260 }
\DoxyCodeLine{261 }
\DoxyCodeLine{262 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{263 \_\_global\_\_ \textcolor{keywordtype}{void} memsetReverse(T* C\_d, T val, int64\_t NELEM) \{}
\DoxyCodeLine{264     \textcolor{keywordtype}{size\_t} offset = (blockIdx.x * blockDim.x + threadIdx.x);}
\DoxyCodeLine{265     \textcolor{keywordtype}{size\_t} stride = blockDim.x * gridDim.x;}
\DoxyCodeLine{266 }
\DoxyCodeLine{267     \textcolor{keywordflow}{for} (int64\_t i = NELEM -\/ stride + offset; i >= 0; i -\/= stride) \{}
\DoxyCodeLine{268         C\_d[i] = val;}
\DoxyCodeLine{269     \}}
\DoxyCodeLine{270 \}}
\DoxyCodeLine{271 }
\DoxyCodeLine{272 }
\DoxyCodeLine{273 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{274 \textcolor{keywordtype}{void} setDefaultData(\textcolor{keywordtype}{size\_t} numElements, T* A\_h, T* B\_h, T* C\_h) \{}
\DoxyCodeLine{275     \textcolor{comment}{// Initialize the host data:}}
\DoxyCodeLine{276     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < numElements; i++) \{}
\DoxyCodeLine{277         \textcolor{keywordflow}{if} (A\_h) (A\_h)[i] = 3.146f + i;  \textcolor{comment}{// Pi}}
\DoxyCodeLine{278         \textcolor{keywordflow}{if} (B\_h) (B\_h)[i] = 1.618f + i;  \textcolor{comment}{// Phi}}
\DoxyCodeLine{279         \textcolor{keywordflow}{if} (C\_h) (C\_h)[i] = 0.0f + i;}
\DoxyCodeLine{280     \}}
\DoxyCodeLine{281 \}}
\DoxyCodeLine{282 }
\DoxyCodeLine{283 }
\DoxyCodeLine{284 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{285 \textcolor{keywordtype}{void} initArraysForHost(T** A\_h, T** B\_h, T** C\_h, \textcolor{keywordtype}{size\_t} N, \textcolor{keywordtype}{bool} usePinnedHost = \textcolor{keyword}{false}) \{}
\DoxyCodeLine{286     \textcolor{keywordtype}{size\_t} Nbytes = N * \textcolor{keyword}{sizeof}(T);}
\DoxyCodeLine{287 }
\DoxyCodeLine{288     \textcolor{keywordflow}{if} (usePinnedHost) \{}
\DoxyCodeLine{289         \textcolor{keywordflow}{if} (A\_h) \{}
\DoxyCodeLine{290             HIPCHECK(hipHostMalloc((\textcolor{keywordtype}{void}**)A\_h, Nbytes));}
\DoxyCodeLine{291         \}}
\DoxyCodeLine{292         \textcolor{keywordflow}{if} (B\_h) \{}
\DoxyCodeLine{293             HIPCHECK(hipHostMalloc((\textcolor{keywordtype}{void}**)B\_h, Nbytes));}
\DoxyCodeLine{294         \}}
\DoxyCodeLine{295         \textcolor{keywordflow}{if} (C\_h) \{}
\DoxyCodeLine{296             HIPCHECK(hipHostMalloc((\textcolor{keywordtype}{void}**)C\_h, Nbytes));}
\DoxyCodeLine{297         \}}
\DoxyCodeLine{298     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{299         \textcolor{keywordflow}{if} (A\_h) \{}
\DoxyCodeLine{300             *A\_h = (T*)malloc(Nbytes);}
\DoxyCodeLine{301             HIPASSERT(*A\_h != NULL);}
\DoxyCodeLine{302         \}}
\DoxyCodeLine{303 }
\DoxyCodeLine{304         \textcolor{keywordflow}{if} (B\_h) \{}
\DoxyCodeLine{305             *B\_h = (T*)malloc(Nbytes);}
\DoxyCodeLine{306             HIPASSERT(*B\_h != NULL);}
\DoxyCodeLine{307         \}}
\DoxyCodeLine{308 }
\DoxyCodeLine{309         \textcolor{keywordflow}{if} (C\_h) \{}
\DoxyCodeLine{310             *C\_h = (T*)malloc(Nbytes);}
\DoxyCodeLine{311             HIPASSERT(*C\_h != NULL);}
\DoxyCodeLine{312         \}}
\DoxyCodeLine{313     \}}
\DoxyCodeLine{314 }
\DoxyCodeLine{315     setDefaultData(N, A\_h ? *A\_h : NULL, B\_h ? *B\_h : NULL, C\_h ? *C\_h : NULL);}
\DoxyCodeLine{316 \}}
\DoxyCodeLine{317 }
\DoxyCodeLine{318 }
\DoxyCodeLine{319 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{320 \textcolor{keywordtype}{void} initArrays(T** A\_d, T** B\_d, T** C\_d, T** A\_h, T** B\_h, T** C\_h, \textcolor{keywordtype}{size\_t} N,}
\DoxyCodeLine{321                 \textcolor{keywordtype}{bool} usePinnedHost = \textcolor{keyword}{false}) \{}
\DoxyCodeLine{322     \textcolor{keywordtype}{size\_t} Nbytes = N * \textcolor{keyword}{sizeof}(T);}
\DoxyCodeLine{323 }
\DoxyCodeLine{324     \textcolor{keywordflow}{if} (A\_d) \{}
\DoxyCodeLine{325         HIPCHECK(hipMalloc(A\_d, Nbytes));}
\DoxyCodeLine{326     \}}
\DoxyCodeLine{327     \textcolor{keywordflow}{if} (B\_d) \{}
\DoxyCodeLine{328         HIPCHECK(hipMalloc(B\_d, Nbytes));}
\DoxyCodeLine{329     \}}
\DoxyCodeLine{330     \textcolor{keywordflow}{if} (C\_d) \{}
\DoxyCodeLine{331         HIPCHECK(hipMalloc(C\_d, Nbytes));}
\DoxyCodeLine{332     \}}
\DoxyCodeLine{333 }
\DoxyCodeLine{334     initArraysForHost(A\_h, B\_h, C\_h, N, usePinnedHost);}
\DoxyCodeLine{335 \}}
\DoxyCodeLine{336 }
\DoxyCodeLine{337 }
\DoxyCodeLine{338 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{339 \textcolor{keywordtype}{void} freeArraysForHost(T* A\_h, T* B\_h, T* C\_h, \textcolor{keywordtype}{bool} usePinnedHost) \{}
\DoxyCodeLine{340     \textcolor{keywordflow}{if} (usePinnedHost) \{}
\DoxyCodeLine{341         \textcolor{keywordflow}{if} (A\_h) \{}
\DoxyCodeLine{342             HIPCHECK(hipHostFree(A\_h));}
\DoxyCodeLine{343         \}}
\DoxyCodeLine{344         \textcolor{keywordflow}{if} (B\_h) \{}
\DoxyCodeLine{345             HIPCHECK(hipHostFree(B\_h));}
\DoxyCodeLine{346         \}}
\DoxyCodeLine{347         \textcolor{keywordflow}{if} (C\_h) \{}
\DoxyCodeLine{348             HIPCHECK(hipHostFree(C\_h));}
\DoxyCodeLine{349         \}}
\DoxyCodeLine{350     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{351         \textcolor{keywordflow}{if} (A\_h) \{}
\DoxyCodeLine{352             free(A\_h);}
\DoxyCodeLine{353         \}}
\DoxyCodeLine{354         \textcolor{keywordflow}{if} (B\_h) \{}
\DoxyCodeLine{355             free(B\_h);}
\DoxyCodeLine{356         \}}
\DoxyCodeLine{357         \textcolor{keywordflow}{if} (C\_h) \{}
\DoxyCodeLine{358             free(C\_h);}
\DoxyCodeLine{359         \}}
\DoxyCodeLine{360     \}}
\DoxyCodeLine{361 \}}
\DoxyCodeLine{362 }
\DoxyCodeLine{363 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{364 \textcolor{keywordtype}{void} freeArrays(T* A\_d, T* B\_d, T* C\_d, T* A\_h, T* B\_h, T* C\_h, \textcolor{keywordtype}{bool} usePinnedHost) \{}
\DoxyCodeLine{365     \textcolor{keywordflow}{if} (A\_d) \{}
\DoxyCodeLine{366         HIPCHECK(hipFree(A\_d));}
\DoxyCodeLine{367     \}}
\DoxyCodeLine{368     \textcolor{keywordflow}{if} (B\_d) \{}
\DoxyCodeLine{369         HIPCHECK(hipFree(B\_d));}
\DoxyCodeLine{370     \}}
\DoxyCodeLine{371     \textcolor{keywordflow}{if} (C\_d) \{}
\DoxyCodeLine{372         HIPCHECK(hipFree(C\_d));}
\DoxyCodeLine{373     \}}
\DoxyCodeLine{374 }
\DoxyCodeLine{375     freeArraysForHost(A\_h, B\_h, C\_h, usePinnedHost);}
\DoxyCodeLine{376 \}}
\DoxyCodeLine{377 }
\DoxyCodeLine{378 \textcolor{preprocessor}{\#if defined(\_\_HIP\_PLATFORM\_HCC\_\_)}}
\DoxyCodeLine{379 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{380 \textcolor{keywordtype}{void} initArrays2DPitch(T** A\_d, T** B\_d, T** C\_d, \textcolor{keywordtype}{size\_t}* pitch\_A, \textcolor{keywordtype}{size\_t}* pitch\_B, \textcolor{keywordtype}{size\_t}* pitch\_C,}
\DoxyCodeLine{381                        \textcolor{keywordtype}{size\_t} numW, \textcolor{keywordtype}{size\_t} numH) \{}
\DoxyCodeLine{382     \textcolor{keywordflow}{if} (A\_d) \{}
\DoxyCodeLine{383         HIPCHECK(hipMallocPitch((\textcolor{keywordtype}{void}**)A\_d, pitch\_A, numW * \textcolor{keyword}{sizeof}(T), numH));}
\DoxyCodeLine{384     \}}
\DoxyCodeLine{385     \textcolor{keywordflow}{if} (B\_d) \{}
\DoxyCodeLine{386         HIPCHECK(hipMallocPitch((\textcolor{keywordtype}{void}**)B\_d, pitch\_B, numW * \textcolor{keyword}{sizeof}(T), numH));}
\DoxyCodeLine{387     \}}
\DoxyCodeLine{388     \textcolor{keywordflow}{if} (C\_d) \{}
\DoxyCodeLine{389         HIPCHECK(hipMallocPitch((\textcolor{keywordtype}{void}**)C\_d, pitch\_C, numW * \textcolor{keyword}{sizeof}(T), numH));}
\DoxyCodeLine{390     \}}
\DoxyCodeLine{391 }
\DoxyCodeLine{392     HIPASSERT(*pitch\_A == *pitch\_B);}
\DoxyCodeLine{393     HIPASSERT(*pitch\_A == *pitch\_C)}
\DoxyCodeLine{394 \}}
\DoxyCodeLine{395 }
\DoxyCodeLine{396 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} initHIPArrays(hipArray** A\_d, hipArray** B\_d, hipArray** C\_d,}
\DoxyCodeLine{397                           \textcolor{keyword}{const} hipChannelFormatDesc* desc, \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} numW, \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} numH,}
\DoxyCodeLine{398                           \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} flags) \{}
\DoxyCodeLine{399     \textcolor{keywordflow}{if} (A\_d) \{}
\DoxyCodeLine{400         HIPCHECK(hipMallocArray(A\_d, desc, numW, numH, flags));}
\DoxyCodeLine{401     \}}
\DoxyCodeLine{402     \textcolor{keywordflow}{if} (B\_d) \{}
\DoxyCodeLine{403         HIPCHECK(hipMallocArray(B\_d, desc, numW, numH, flags));}
\DoxyCodeLine{404     \}}
\DoxyCodeLine{405     \textcolor{keywordflow}{if} (C\_d) \{}
\DoxyCodeLine{406         HIPCHECK(hipMallocArray(C\_d, desc, numW, numH, flags));}
\DoxyCodeLine{407     \}}
\DoxyCodeLine{408 \}}
\DoxyCodeLine{409 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{410 }
\DoxyCodeLine{411 \textcolor{comment}{// Assumes C\_h contains vector add of A\_h + B\_h}}
\DoxyCodeLine{412 \textcolor{comment}{// Calls the test "{}failed"{} macro if a mismatch is detected.}}
\DoxyCodeLine{413 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{414 \textcolor{keywordtype}{size\_t} checkVectorADD(T* A\_h, T* B\_h, T* result\_H, \textcolor{keywordtype}{size\_t} N, \textcolor{keywordtype}{bool} expectMatch = \textcolor{keyword}{true},}
\DoxyCodeLine{415                       \textcolor{keywordtype}{bool} reportMismatch = \textcolor{keyword}{true}) \{}
\DoxyCodeLine{416     \textcolor{keywordtype}{size\_t} mismatchCount = 0;}
\DoxyCodeLine{417     \textcolor{keywordtype}{size\_t} firstMismatch = 0;}
\DoxyCodeLine{418     \textcolor{keywordtype}{size\_t} mismatchesToPrint = 10;}
\DoxyCodeLine{419     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < N; i++) \{}
\DoxyCodeLine{420         T expected = A\_h[i] + B\_h[i];}
\DoxyCodeLine{421         \textcolor{keywordflow}{if} (result\_H[i] != expected) \{}
\DoxyCodeLine{422             \textcolor{keywordflow}{if} (mismatchCount == 0) \{}
\DoxyCodeLine{423                 firstMismatch = i;}
\DoxyCodeLine{424             \}}
\DoxyCodeLine{425             mismatchCount++;}
\DoxyCodeLine{426             \textcolor{keywordflow}{if} ((mismatchCount <= mismatchesToPrint) \&\& expectMatch) \{}
\DoxyCodeLine{427                 std::cout << std::fixed << std::setprecision(32);}
\DoxyCodeLine{428                 std::cout << \textcolor{stringliteral}{"{}At "{}} << i << std::endl;}
\DoxyCodeLine{429                 std::cout << \textcolor{stringliteral}{"{}  Computed:"{}} << result\_H[i] << std::endl;}
\DoxyCodeLine{430                 std::cout << \textcolor{stringliteral}{"{}  Expected:"{}} << expected << std::endl;}
\DoxyCodeLine{431             \}}
\DoxyCodeLine{432         \}}
\DoxyCodeLine{433     \}}
\DoxyCodeLine{434 }
\DoxyCodeLine{435     \textcolor{keywordflow}{if} (reportMismatch) \{}
\DoxyCodeLine{436         \textcolor{keywordflow}{if} (expectMatch) \{}
\DoxyCodeLine{437             \textcolor{keywordflow}{if} (mismatchCount) \{}
\DoxyCodeLine{438                 failed(\textcolor{stringliteral}{"{}\%zu mismatches ; first at index:\%zu\(\backslash\)n"{}}, mismatchCount, firstMismatch);}
\DoxyCodeLine{439             \}}
\DoxyCodeLine{440         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{441             \textcolor{keywordflow}{if} (mismatchCount == 0) \{}
\DoxyCodeLine{442                 failed(\textcolor{stringliteral}{"{}expected mismatches but did not detect any!"{}});}
\DoxyCodeLine{443             \}}
\DoxyCodeLine{444         \}}
\DoxyCodeLine{445     \}}
\DoxyCodeLine{446 }
\DoxyCodeLine{447     \textcolor{keywordflow}{return} mismatchCount;}
\DoxyCodeLine{448 \}}
\DoxyCodeLine{449 }
\DoxyCodeLine{450 }
\DoxyCodeLine{451 \textcolor{comment}{// Assumes C\_h contains vector add of A\_h + B\_h}}
\DoxyCodeLine{452 \textcolor{comment}{// Calls the test "{}failed"{} macro if a mismatch is detected.}}
\DoxyCodeLine{453 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{454 \textcolor{keywordtype}{void} checkTest(T* expected\_H, T* result\_H, \textcolor{keywordtype}{size\_t} N, \textcolor{keywordtype}{bool} expectMatch = \textcolor{keyword}{true}) \{}
\DoxyCodeLine{455     \textcolor{keywordtype}{size\_t} mismatchCount = 0;}
\DoxyCodeLine{456     \textcolor{keywordtype}{size\_t} firstMismatch = 0;}
\DoxyCodeLine{457     \textcolor{keywordtype}{size\_t} mismatchesToPrint = 10;}
\DoxyCodeLine{458     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < N; i++) \{}
\DoxyCodeLine{459         \textcolor{keywordflow}{if} (result\_H[i] != expected\_H[i]) \{}
\DoxyCodeLine{460             \textcolor{keywordflow}{if} (mismatchCount == 0) \{}
\DoxyCodeLine{461                 firstMismatch = i;}
\DoxyCodeLine{462             \}}
\DoxyCodeLine{463             mismatchCount++;}
\DoxyCodeLine{464             \textcolor{keywordflow}{if} ((mismatchCount <= mismatchesToPrint) \&\& expectMatch) \{}
\DoxyCodeLine{465                 std::cout << std::fixed << std::setprecision(32);}
\DoxyCodeLine{466                 std::cout << \textcolor{stringliteral}{"{}At "{}} << i << std::endl;}
\DoxyCodeLine{467                 std::cout << \textcolor{stringliteral}{"{}  Computed:"{}} << result\_H[i] << std::endl;}
\DoxyCodeLine{468                 std::cout << \textcolor{stringliteral}{"{}  Expected:"{}} << expected\_H[i] << std::endl;}
\DoxyCodeLine{469             \}}
\DoxyCodeLine{470         \}}
\DoxyCodeLine{471     \}}
\DoxyCodeLine{472 }
\DoxyCodeLine{473     \textcolor{keywordflow}{if} (expectMatch) \{}
\DoxyCodeLine{474         \textcolor{keywordflow}{if} (mismatchCount) \{}
\DoxyCodeLine{475             fprintf(stderr, \textcolor{stringliteral}{"{}\%zu mismatches ; first at index:\%zu\(\backslash\)n"{}}, mismatchCount, firstMismatch);}
\DoxyCodeLine{476             \textcolor{comment}{// failed("{}\%zu mismatches ; first at index:\%zu\(\backslash\)n"{}, mismatchCount, firstMismatch);}}
\DoxyCodeLine{477         \}}
\DoxyCodeLine{478     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{479         \textcolor{keywordflow}{if} (mismatchCount == 0) \{}
\DoxyCodeLine{480             failed(\textcolor{stringliteral}{"{}expected mismatches but did not detect any!"{}});}
\DoxyCodeLine{481         \}}
\DoxyCodeLine{482     \}}
\DoxyCodeLine{483 \}}
\DoxyCodeLine{484 }
\DoxyCodeLine{485 }
\DoxyCodeLine{486 \textcolor{comment}{//-\/-\/-\/}}
\DoxyCodeLine{487 \textcolor{keyword}{struct }Pinned \{}
\DoxyCodeLine{488     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} isPinned = \textcolor{keyword}{true};}
\DoxyCodeLine{489     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* str() \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Pinned"{}}; \};}
\DoxyCodeLine{490 }
\DoxyCodeLine{491     \textcolor{keyword}{static} \textcolor{keywordtype}{void}* Alloc(\textcolor{keywordtype}{size\_t} sizeBytes) \{}
\DoxyCodeLine{492         \textcolor{keywordtype}{void}* p;}
\DoxyCodeLine{493         HIPCHECK(hipHostMalloc((\textcolor{keywordtype}{void}**)\&p, sizeBytes));}
\DoxyCodeLine{494         \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{495     \};}
\DoxyCodeLine{496 \};}
\DoxyCodeLine{497 }
\DoxyCodeLine{498 }
\DoxyCodeLine{499 \textcolor{comment}{//-\/-\/-\/}}
\DoxyCodeLine{500 \textcolor{keyword}{struct }Unpinned \{}
\DoxyCodeLine{501     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} isPinned = \textcolor{keyword}{false};}
\DoxyCodeLine{502     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* str() \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Unpinned"{}}; \};}
\DoxyCodeLine{503 }
\DoxyCodeLine{504     \textcolor{keyword}{static} \textcolor{keywordtype}{void}* Alloc(\textcolor{keywordtype}{size\_t} sizeBytes) \{}
\DoxyCodeLine{505         \textcolor{keywordtype}{void}* p = malloc(sizeBytes);}
\DoxyCodeLine{506         HIPASSERT(p);}
\DoxyCodeLine{507         \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{508     \};}
\DoxyCodeLine{509 \};}
\DoxyCodeLine{510 }
\DoxyCodeLine{511 }
\DoxyCodeLine{512 \textcolor{keyword}{struct }Memcpy \{}
\DoxyCodeLine{513     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* str() \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Memcpy"{}}; \};}
\DoxyCodeLine{514 \};}
\DoxyCodeLine{515 }
\DoxyCodeLine{516 \textcolor{keyword}{struct }MemcpyAsync \{}
\DoxyCodeLine{517     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* str() \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}MemcpyAsync"{}}; \};}
\DoxyCodeLine{518 \};}
\DoxyCodeLine{519 }
\DoxyCodeLine{520 }
\DoxyCodeLine{521 \textcolor{keyword}{template} <\textcolor{keyword}{typename} C>}
\DoxyCodeLine{522 \textcolor{keyword}{struct }MemTraits;}
\DoxyCodeLine{523 }
\DoxyCodeLine{524 }
\DoxyCodeLine{525 \textcolor{keyword}{template} <>}
\DoxyCodeLine{526 \textcolor{keyword}{struct }MemTraits<Memcpy> \{}
\DoxyCodeLine{527     \textcolor{keyword}{static} \textcolor{keywordtype}{void} Copy(\textcolor{keywordtype}{void}* dest, \textcolor{keyword}{const} \textcolor{keywordtype}{void}* src, \textcolor{keywordtype}{size\_t} sizeBytes, hipMemcpyKind kind,}
\DoxyCodeLine{528                      \mbox{\hyperlink{class_c_h_i_p_queue}{hipStream\_t}} stream) \{}
\DoxyCodeLine{529         HIPCHECK(hipMemcpy(dest, src, sizeBytes, kind));}
\DoxyCodeLine{530     \}}
\DoxyCodeLine{531 \};}
\DoxyCodeLine{532 }
\DoxyCodeLine{533 }
\DoxyCodeLine{534 \textcolor{keyword}{template} <>}
\DoxyCodeLine{535 \textcolor{keyword}{struct }MemTraits<MemcpyAsync> \{}
\DoxyCodeLine{536     \textcolor{keyword}{static} \textcolor{keywordtype}{void} Copy(\textcolor{keywordtype}{void}* dest, \textcolor{keyword}{const} \textcolor{keywordtype}{void}* src, \textcolor{keywordtype}{size\_t} sizeBytes, hipMemcpyKind kind,}
\DoxyCodeLine{537                      \mbox{\hyperlink{class_c_h_i_p_queue}{hipStream\_t}} stream) \{}
\DoxyCodeLine{538         HIPCHECK(hipMemcpyAsync(dest, src, sizeBytes, kind, stream));}
\DoxyCodeLine{539     \}}
\DoxyCodeLine{540 \};}
\DoxyCodeLine{541 }
\DoxyCodeLine{542 \};  \textcolor{comment}{// namespace HipTest}}
\DoxyCodeLine{543 \textcolor{preprocessor}{\#endif }\textcolor{comment}{//\_\_cplusplus}}

\end{DoxyCode}
