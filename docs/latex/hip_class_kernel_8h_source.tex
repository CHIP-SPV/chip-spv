\hypertarget{hip_class_kernel_8h_source}{}\doxysection{hip\+Class\+Kernel.\+h}
\label{hip_class_kernel_8h_source}\index{/Users/pvelesko/local/CHIP-\/SPV/HIP/tests/src/compiler/hipClassKernel.h@{/Users/pvelesko/local/CHIP-\/SPV/HIP/tests/src/compiler/hipClassKernel.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{Copyright (c) 2015 -\/ 2021 Advanced Micro Devices, Inc. All rights reserved.}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{Permission is hereby granted, free of charge, to any person obtaining a copy}}
\DoxyCodeLine{5 \textcolor{comment}{of this software and associated documentation files (the "{}Software"{}), to deal}}
\DoxyCodeLine{6 \textcolor{comment}{in the Software without restriction, including without limitation the rights}}
\DoxyCodeLine{7 \textcolor{comment}{to use, copy, modify, merge, publish, distribute, sublicense, and/or sell}}
\DoxyCodeLine{8 \textcolor{comment}{copies of the Software, and to permit persons to whom the Software is}}
\DoxyCodeLine{9 \textcolor{comment}{furnished to do so, subject to the following conditions:}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{The above copyright notice and this permission notice shall be included in}}
\DoxyCodeLine{12 \textcolor{comment}{all copies or substantial portions of the Software.}}
\DoxyCodeLine{13 \textcolor{comment}{}}
\DoxyCodeLine{14 \textcolor{comment}{THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{15 \textcolor{comment}{IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}}
\DoxyCodeLine{16 \textcolor{comment}{FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE}}
\DoxyCodeLine{17 \textcolor{comment}{AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}}
\DoxyCodeLine{18 \textcolor{comment}{LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}}
\DoxyCodeLine{19 \textcolor{comment}{OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN}}
\DoxyCodeLine{20 \textcolor{comment}{THE SOFTWARE.}}
\DoxyCodeLine{21 \textcolor{comment}{*/}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#ifndef \_COMPILER\_HIPCLASSKERNEL\_H\_}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#define \_COMPILER\_HIPCLASSKERNEL\_H\_}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include "{}hip/hip\_runtime.h"{}}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include "{}test\_common.h"{}}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} BLOCKS = 512;}
\DoxyCodeLine{31 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} THREADS\_PER\_BLOCK = 1;}
\DoxyCodeLine{32 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} ENABLE\_DESTRUCTOR\_TEST = 0;}
\DoxyCodeLine{33 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} ENABLE\_VIRTUAL\_TESTS = 0;}
\DoxyCodeLine{34 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} ENABLE\_FRIEND\_TEST = 0;}
\DoxyCodeLine{35 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} ENABLE\_OVERLAD\_OVERRIDE\_TESTS = 0;}
\DoxyCodeLine{36 \textcolor{keywordtype}{size\_t} NBOOL = BLOCKS * \textcolor{keyword}{sizeof}(bool);}
\DoxyCodeLine{37 }
\DoxyCodeLine{38 \textcolor{preprocessor}{\#define test\_passed(test\_name) printf("{}\%s \%s  PASSED!\%s\(\backslash\)n"{}}, KGRN, \#test\_name, KNRM);}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{preprocessor}{\#ifdef ENABLE\_OVERLOAD\_OVERRIDE\_TESTS}}
\DoxyCodeLine{41 \textcolor{keyword}{class }testFuncOvld\{}
\DoxyCodeLine{42   \textcolor{keyword}{public}:}
\DoxyCodeLine{43   \textcolor{keywordtype}{int} \_\_host\_\_ \_\_device\_\_ func1(\textcolor{keywordtype}{int} a)\{}
\DoxyCodeLine{44     \textcolor{keywordflow}{return} a + 10;  }
\DoxyCodeLine{45   \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47   \textcolor{keywordtype}{int} \_\_host\_\_ \_\_device\_\_ func1(\textcolor{keywordtype}{int} a , \textcolor{keywordtype}{int} b)\{}
\DoxyCodeLine{48     \textcolor{keywordflow}{return} a + b + 10;  }
\DoxyCodeLine{49   \}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \};}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{keyword}{class }testOvrB\{}
\DoxyCodeLine{55   \textcolor{keyword}{public}:}
\DoxyCodeLine{56   \textcolor{keywordtype}{int} \_\_host\_\_ \_\_device\_\_ ovrdFunc1()\{}
\DoxyCodeLine{57     \textcolor{keywordflow}{return}  10;  }
\DoxyCodeLine{58   \}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 }
\DoxyCodeLine{61 \};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 }
\DoxyCodeLine{64 \textcolor{keyword}{class }testOvrD: \textcolor{keyword}{public} testOvrB\{}
\DoxyCodeLine{65   \textcolor{keyword}{public}:}
\DoxyCodeLine{66     \textcolor{keywordtype}{int} \_\_host\_\_ \_\_device\_\_ ovrdFunc1()\{}
\DoxyCodeLine{67     \textcolor{keywordtype}{int} x = testOvrB::ovrdFunc1();}
\DoxyCodeLine{68      \textcolor{keywordflow}{return} x + 20;}
\DoxyCodeLine{69     \}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71 \};}
\DoxyCodeLine{72 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{73 }
\DoxyCodeLine{74 \textcolor{preprocessor}{\#ifdef ENABLE\_FRIEND\_TEST}}
\DoxyCodeLine{75 \textcolor{keyword}{class }testFrndA\{}
\DoxyCodeLine{76    \textcolor{keyword}{private}:}
\DoxyCodeLine{77        \textcolor{keywordtype}{int} fa = 10;}
\DoxyCodeLine{78    \textcolor{keyword}{public}:}
\DoxyCodeLine{79       \textcolor{keyword}{friend} \textcolor{keyword}{class }testFrndB;}
\DoxyCodeLine{80 \};}
\DoxyCodeLine{81  }
\DoxyCodeLine{82 \textcolor{keyword}{class }testFrndB\{}
\DoxyCodeLine{83     \textcolor{keyword}{public}:}
\DoxyCodeLine{84       \_\_host\_\_ \_\_device\_\_ \textcolor{keywordtype}{int} showA()\{}
\DoxyCodeLine{85          testFrndA x;}
\DoxyCodeLine{86           \textcolor{keywordflow}{return} x.fa;}
\DoxyCodeLine{87      \}}
\DoxyCodeLine{88 \};}
\DoxyCodeLine{89 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{90 }
\DoxyCodeLine{91 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_class_empty}{testClassEmpty}} \{\};}
\DoxyCodeLine{92 }
\DoxyCodeLine{93 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_pass_by_value}{testPassByValue}}\{}
\DoxyCodeLine{94  \textcolor{keyword}{public}:}
\DoxyCodeLine{95    \textcolor{keywordtype}{int} exI;}
\DoxyCodeLine{96    \textcolor{keywordtype}{char} exC;}
\DoxyCodeLine{97 \};}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_size_a}{testSizeA}} \{}
\DoxyCodeLine{100  \textcolor{keyword}{public}:}
\DoxyCodeLine{101     \textcolor{keywordtype}{float} xa;}
\DoxyCodeLine{102     \textcolor{keywordtype}{int} ia;}
\DoxyCodeLine{103     \textcolor{keywordtype}{double} da;}
\DoxyCodeLine{104     \textcolor{keyword}{static} \textcolor{keywordtype}{char} ca;}
\DoxyCodeLine{105 \};}
\DoxyCodeLine{106 }
\DoxyCodeLine{107 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_size_derived}{testSizeDerived}} : \mbox{\hyperlink{classtest_size_a}{testSizeA}} \{}
\DoxyCodeLine{108  \textcolor{keyword}{public}:}
\DoxyCodeLine{109     \textcolor{keywordtype}{float} fd;}
\DoxyCodeLine{110 \};}
\DoxyCodeLine{111 }
\DoxyCodeLine{112 \textcolor{preprocessor}{\#pragma pack(push,4)}}
\DoxyCodeLine{113 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_size_derived2}{testSizeDerived2}} : \mbox{\hyperlink{classtest_size_a}{testSizeA}} \{}
\DoxyCodeLine{114  \textcolor{keyword}{public}:}
\DoxyCodeLine{115     \textcolor{keywordtype}{float} fd;}
\DoxyCodeLine{116 \};}
\DoxyCodeLine{117 \textcolor{preprocessor}{\#pragma pack(pop)}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_size_b}{testSizeB}} \{}
\DoxyCodeLine{120  \textcolor{keyword}{public}:}
\DoxyCodeLine{121     \textcolor{keywordtype}{char} ab;}
\DoxyCodeLine{122     \textcolor{keywordtype}{int} ib;}
\DoxyCodeLine{123     \textcolor{keywordtype}{char} cb;}
\DoxyCodeLine{124 \};}
\DoxyCodeLine{125 }
\DoxyCodeLine{126 \textcolor{preprocessor}{\#ifdef ENBABLE\_VIRTUAL\_TESTS}}
\DoxyCodeLine{127 \textcolor{keyword}{class }testSizeVirtDer : \textcolor{keyword}{public} \textcolor{keyword}{virtual} \mbox{\hyperlink{classtest_size_b}{testSizeB}} \{}
\DoxyCodeLine{128  \textcolor{keyword}{public}: }
\DoxyCodeLine{129     \textcolor{keywordtype}{int} ivd;}
\DoxyCodeLine{130 \};}
\DoxyCodeLine{131 }
\DoxyCodeLine{132 \textcolor{keyword}{class }testSizeVirtDer1 : \textcolor{keyword}{public} \textcolor{keyword}{virtual} \mbox{\hyperlink{classtest_size_b}{testSizeB}} \{}
\DoxyCodeLine{133  \textcolor{keyword}{public}: }
\DoxyCodeLine{134     \textcolor{keywordtype}{int} ivd1;}
\DoxyCodeLine{135 \};}
\DoxyCodeLine{136 }
\DoxyCodeLine{137 \textcolor{keyword}{class }testSizeDerMulti : \textcolor{keyword}{public} testSizeVirtDer, \textcolor{keyword}{public} testSizeVirtDer1 \{}
\DoxyCodeLine{138  \textcolor{keyword}{public}: }
\DoxyCodeLine{139     \textcolor{keywordtype}{int} ivd2;}
\DoxyCodeLine{140 \};}
\DoxyCodeLine{141 }
\DoxyCodeLine{142 \textcolor{preprocessor}{\#pragma pack(push,4)}}
\DoxyCodeLine{143 \textcolor{keyword}{class }testSizeVirtDerPack : \textcolor{keyword}{public} \textcolor{keyword}{virtual} \mbox{\hyperlink{classtest_size_b}{testSizeB}} \{}
\DoxyCodeLine{144  \textcolor{keyword}{public}: }
\DoxyCodeLine{145     \textcolor{keywordtype}{int} ivd;}
\DoxyCodeLine{146 \};}
\DoxyCodeLine{147 \textcolor{preprocessor}{\#pragma pack(pop)}}
\DoxyCodeLine{148 \textcolor{preprocessor}{\#endif }}
\DoxyCodeLine{149 }
\DoxyCodeLine{150 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_size_c}{testSizeC}} \{}
\DoxyCodeLine{151  \textcolor{keyword}{public}:}
\DoxyCodeLine{152     \textcolor{keywordtype}{char} ac;}
\DoxyCodeLine{153     \textcolor{keywordtype}{int} ic;}
\DoxyCodeLine{154     \textcolor{keywordtype}{int} bc[2];}
\DoxyCodeLine{155 \};}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 \textcolor{preprocessor}{\#ifdef ENABLE\_VIRTUAL\_TESTS}}
\DoxyCodeLine{158 \textcolor{keyword}{class }testSizeDV \{}
\DoxyCodeLine{159  \textcolor{keyword}{public}:}
\DoxyCodeLine{160     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \_\_host\_\_ \_\_device\_\_ func1();}
\DoxyCodeLine{161  \textcolor{keyword}{private}:}
\DoxyCodeLine{162     \textcolor{keywordtype}{int} iDV;}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 \};}
\DoxyCodeLine{165 }
\DoxyCodeLine{166 \textcolor{keyword}{class }testSizeDerivedDV : testSizeDV \{}
\DoxyCodeLine{167  \textcolor{keyword}{public}:}
\DoxyCodeLine{168     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \_\_host\_\_ \_\_device\_\_ funcD1();}
\DoxyCodeLine{169  \textcolor{keyword}{private}:}
\DoxyCodeLine{170     \textcolor{keywordtype}{int} iDDV;}
\DoxyCodeLine{171 \};}
\DoxyCodeLine{172 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{173 }
\DoxyCodeLine{174 \textcolor{preprocessor}{\#pragma pack(push, 1)}}
\DoxyCodeLine{175 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_size_p1}{testSizeP1}} \{}
\DoxyCodeLine{176  \textcolor{keyword}{public}:}
\DoxyCodeLine{177     \textcolor{keywordtype}{char} ap;}
\DoxyCodeLine{178     \textcolor{keywordtype}{int} ip;}
\DoxyCodeLine{179     \textcolor{keywordtype}{char} cp;}
\DoxyCodeLine{180 \};}
\DoxyCodeLine{181 \textcolor{preprocessor}{\#pragma pack(pop)}}
\DoxyCodeLine{182 }
\DoxyCodeLine{183 \textcolor{preprocessor}{\#pragma pack(push, 1) }}
\DoxyCodeLine{184 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_size_p2}{testSizeP2}} \{}
\DoxyCodeLine{185  \textcolor{keyword}{public}:}
\DoxyCodeLine{186     \textcolor{keywordtype}{char} ap1;}
\DoxyCodeLine{187     \textcolor{keywordtype}{int} ip1;}
\DoxyCodeLine{188     \textcolor{keywordtype}{int} bp1[2];}
\DoxyCodeLine{189 \};}
\DoxyCodeLine{190 \textcolor{preprocessor}{\#pragma pack(pop)}}
\DoxyCodeLine{191 }
\DoxyCodeLine{192 \textcolor{preprocessor}{\#pragma pack(push, 2)}}
\DoxyCodeLine{193 \textcolor{keyword}{class }\mbox{\hyperlink{classtest_size_p3}{testSizeP3}} \{}
\DoxyCodeLine{194  \textcolor{keyword}{public}:}
\DoxyCodeLine{195     \textcolor{keywordtype}{char} ap2;}
\DoxyCodeLine{196     \textcolor{keywordtype}{int} ip2;}
\DoxyCodeLine{197     \textcolor{keywordtype}{char} cp2;}
\DoxyCodeLine{198 \};}
\DoxyCodeLine{199 \textcolor{preprocessor}{\#pragma pack(pop)}}
\DoxyCodeLine{200 }
\DoxyCodeLine{201 \textcolor{preprocessor}{\#ifdef ENABLE\_DESTRUCTOR\_TEST}}
\DoxyCodeLine{202 \textcolor{keyword}{class }testDeviceClass \{}
\DoxyCodeLine{203  \textcolor{keyword}{public}:}
\DoxyCodeLine{204     \textcolor{keywordtype}{int} iVar;}
\DoxyCodeLine{205     \_\_host\_\_ \_\_device\_\_ testDeviceClass();}
\DoxyCodeLine{206     \_\_host\_\_ \_\_device\_\_ testDeviceClass(\textcolor{keywordtype}{int} a);}
\DoxyCodeLine{207     \_\_host\_\_ \_\_device\_\_ \string~testDeviceClass();}
\DoxyCodeLine{208 \};}
\DoxyCodeLine{209 }
\DoxyCodeLine{210 \_\_host\_\_ \_\_device\_\_}
\DoxyCodeLine{211 testDeviceClass::testDeviceClass() \{}
\DoxyCodeLine{212   iVar = 5;}
\DoxyCodeLine{213 \}}
\DoxyCodeLine{214 }
\DoxyCodeLine{215 \_\_host\_\_ \_\_device\_\_}
\DoxyCodeLine{216 testDeviceClass::testDeviceClass(\textcolor{keywordtype}{int} a) \{}
\DoxyCodeLine{217   iVar = a;}
\DoxyCodeLine{218 \}}
\DoxyCodeLine{219 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{220 }
\DoxyCodeLine{221 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// \_HIPCLASSKERNEL\_H\_}}
\DoxyCodeLine{222 }
\DoxyCodeLine{223 \textcolor{keyword}{class }\mbox{\hyperlink{class_hip_class_tests}{HipClassTests}}\{ }
\DoxyCodeLine{224   \textcolor{keyword}{public}:}
\DoxyCodeLine{225     \textcolor{keywordtype}{void} TestForEmptyClass(\textcolor{keywordtype}{void});}
\DoxyCodeLine{226     \textcolor{keywordtype}{void} TestForClassBSize(\textcolor{keywordtype}{void});}
\DoxyCodeLine{227     \textcolor{keywordtype}{void} TestForClassSize(\textcolor{keywordtype}{void});}
\DoxyCodeLine{228     \textcolor{keywordtype}{void} TestForVirtualClassSize(\textcolor{keywordtype}{void});}
\DoxyCodeLine{229     \textcolor{keywordtype}{void} TestForPassByValue(\textcolor{keywordtype}{void});}
\DoxyCodeLine{230     \textcolor{keywordtype}{void} TestForMallocPassByValue(\textcolor{keywordtype}{void});}
\DoxyCodeLine{231     \textcolor{keywordtype}{void} TestForConsrtDesrt(\textcolor{keywordtype}{void});}
\DoxyCodeLine{232     \textcolor{keywordtype}{void} TestForOverload(\textcolor{keywordtype}{void});}
\DoxyCodeLine{233     \textcolor{keywordtype}{void} TestForOverride(\textcolor{keywordtype}{void});}
\DoxyCodeLine{234  }
\DoxyCodeLine{235     \textcolor{keywordtype}{bool}* AllocateHostMemory(\textcolor{keywordtype}{void});}
\DoxyCodeLine{236     \textcolor{keywordtype}{bool}* AllocateDeviceMemory(\textcolor{keywordtype}{void});}
\DoxyCodeLine{237     \textcolor{keywordtype}{void} VerifyResult(\textcolor{keywordtype}{bool}* result\_ech, \textcolor{keywordtype}{bool}* result\_ecd);}
\DoxyCodeLine{238     \textcolor{keywordtype}{void} FreeMem(\textcolor{keywordtype}{bool}* result\_ech, \textcolor{keywordtype}{bool}* result\_ecd);}
\DoxyCodeLine{239 \};}

\end{DoxyCode}
